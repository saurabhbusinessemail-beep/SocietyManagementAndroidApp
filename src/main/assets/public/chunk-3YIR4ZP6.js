import{b as it,d as nt}from"./chunk-BXTUOHYQ.js";import{a as L}from"./chunk-H5A3E2HY.js";import{B as mt,C as ct,E as dt,F as ut,d as E,e as O,f as ee,g as he,i as ye,j as be,l as rt,m as ve,n as Se,o as st,p as V,q as at,r as K,s as lt,t as f,w as Ne,x as z,z as xe}from"./chunk-PWWNUZIU.js";import{A as u,C as Q,E as Y,F as J,G as Ze,H as X,M as et,N as tt,k as j,m as T,n as Xe,o as Me,qa as Z,r as P,ra as B,sa as U,ta as ot,v as d,x as $,y as W,z as R}from"./chunk-KWNZ2CR7.js";import{$b as We,Ab as _,Bc as _e,Cb as l,E as C,Ec as D,Fc as N,Gc as Ye,Hb as qe,Ib as De,Jb as je,Kb as Re,Lb as y,Lc as Je,Mb as ie,Nb as k,Ob as Ue,P as I,Pb as Ge,Qb as $e,Rb as ze,Sa as r,Ta as h,U as Ae,Ub as Ce,V as ge,Vb as Ke,Z as Te,Zb as He,ac as Qe,da as M,ea as fe,f as q,hb as p,jb as o,ma as b,na as v,rb as a,sb as s,tb as g,ub as F,vb as w,xb as S}from"./chunk-WBOKHTJO.js";import"./chunk-OQV6BHXQ.js";import{f as pe}from"./chunk-CWTPBX7D.js";var St=i=>({society:i});function xt(i,c){i&1&&g(0,"ui-button",5),i&2&&o("smColumns",1)("mdColumns",1)("lgColumns",1)}function It(i,c){}function kt(i,c){if(i&1&&(F(0),p(1,It,0,0,"ng-template",6),w()),i&2){let e=c.$implicit;l();let t=Re(6);r(),o("ngTemplateOutlet",t)("ngTemplateOutletContext",Ke(2,St,e))}}function Ft(i,c){if(i&1){let e=S();a(0,"ui-card",7),F(1,8),a(2,"a",9),_("click",function(){let n=b(e).society,m=l();return v(m.handleSocietyClick(n))}),y(3),s(),a(4,"div",10)(5,"span")(6,"strong"),y(7,"Buildings:"),s(),y(8),s(),a(9,"span")(10,"strong"),y(11,"Flats:"),s(),y(12," --"),s()(),a(13,"div",11),y(14),s(),w(),F(15,12),g(16,"app-icon",13),w(),s()}if(i&2){let e,t=c.society;o("smColumns",12)("mdColumns",6)("lgColumns",6),r(3),k(" ",t.societyName," "),r(5),k(" ",(e=t.numberOfBuildings)!==null&&e!==void 0?e:1,""),r(6),k(" ",t.gpsLocation.address," ")}}var pt=(()=>{class i{get canAddSociety(){return this.loginService.hasPermission(f.society_add)}constructor(e,t,n){this.societyService=e,this.loginService=t,this.router=n,this.isComponentActive=new q,this.socities=[]}ngOnInit(){this.loadSocities()}loadSocities(){this.societyService.getAllSocieties().pipe(C(1)).subscribe({next:e=>{this.socities=e.data??[]},error:()=>console.log("Error while getting socities")})}handleSocietyClick(e){let t=this.loginService.getProfileFromStorage();if(!t)return;t.user.role==="admin"&&this.router.navigate(["/society",e._id,"details"]);let n=t.socities.find(G=>G.societyId===e._id)?.societyRoles;if(!n)return;let m=n.some(G=>G.name==="societyadmin"||G.name==="manager"),x=n.some(G=>G.name==="owner"||G.name==="member"||G.name==="tenant");m?this.router.navigate(["/society",e._id,"details"]):x&&this.router.navigate(["/myflats",e._id,"list"])}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(L),h(P),h(T))}}static{this.\u0275cmp=M({type:i,selectors:[["app-society-list"]],decls:7,vars:3,consts:[["society",""],[3,"hideMoreActions"],["moreActions",""],["label","Add Society","type","primary","routerLink","../add",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],[4,"ngFor","ngForOf"],["label","Add Society","type","primary","routerLink","../add",3,"smColumns","mdColumns","lgColumns"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"smColumns","mdColumns","lgColumns"],["card-main",""],[1,"society-name",3,"click"],[1,"society-meta"],[1,"society-address"],["card-icon",""],["name","location-color"]],template:function(t,n){t&1&&(a(0,"app-layout",1),F(1,2),p(2,xt,1,3,"ui-button",3),w(),a(3,"ui-form-layout"),p(4,kt,2,4,"ng-container",4),s()(),p(5,Ft,17,6,"ng-template",null,0,Qe)),t&2&&(o("hideMoreActions",!n.canAddSociety),r(2),o("ngIf",n.canAddSociety),r(2),o("ngForOf",n.socities))},dependencies:[D,N,Ye,Xe,E,O,B,z,U,V],styles:[".society-name[_ngcontent-%COMP%]{color:#0b4da0;font-weight:600;text-decoration:none;line-height:1.2}.society-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.society-meta[_ngcontent-%COMP%]{display:flex;gap:18px;color:#000;opacity:.85}@media (max-width: 767px){.society-meta[_ngcontent-%COMP%]{gap:12px;flex-wrap:wrap}}.society-address[_ngcontent-%COMP%]{color:#4c4545;line-height:1.4;max-width:520px}@media (min-width: 992px){.society-address[_ngcontent-%COMP%]{max-width:680px}}"]})}}return i})();function Tt(i,c){if(i&1&&(a(0,"div",10),g(1,"ui-label",11),s()),i&2){let e=l();o("smColumns",12)("mdColumns",12)("lgColumns",8),r(),o("valueText",e.errorMessage)}}var Ee=(()=>{class i{constructor(e,t,n,m){this.router=e,this.route=t,this.societyService=n,this.location=m,this.fb=new R({societyId:new u(""),societyName:new u(""),gpsLocation:new u(void 0),numberOfBuildings:new u(1)}),this.isMultipleBuildings=new u([]),this.multiBuildingConfig={id:"isMultipleBuildings",label:"More than 1 building?",helpText:"Check this if this society has multiple buildings."},this.multiBuildingOptions=[{label:"Yes",value:!0}],this.isComponentActive=new q,this.countryList=at.map(x=>({label:x.countryName,value:x.countryCode})),this.locationSearchConfig={id:"location",label:"Location",placeholder:"Search Location",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Location is required"}},this.societyNameConfig={id:"societyName",label:"Society Name",placeholder:"Enter Society Name",validations:[{name:"required",validator:d.required},{name:"minlength",validator:d.minLength(3)}],errorMessages:{required:"Society Name is required",minlength:"Minimum 3 characters required"}},this.buildingCountConfig={id:"numberOfBuildings",label:"Number Of Buildings",placeholder:"Enter Count Of Buildings",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(2)}],errorMessages:{required:"Society Name is required",min:"Value cannot be less than 2."}},this.errorMessage=""}ngOnInit(){this.isMultipleBuildings.valueChanges.pipe(I(this.isComponentActive)).subscribe(t=>{let n=t&&t.length>0?t[0]:!1;this.updateBuildingControl(n)}),this.fb.valueChanges.pipe(I(this.isComponentActive)).subscribe(t=>this.errorMessage=""),this.updateBuildingControl(!1);let e=this.route.snapshot.paramMap.get("id");e&&(this.fb.get("societyId")?.setValue(e),this.loadSocietyDetails(e))}updateBuildingControl(e){let t=this.fb.get("numberOfBuildings");e?t?.enable():t?.disable()}loadSocietyDetails(e){this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.fb.patchValue(t),this.fb.get("gpsLocation")?.setValue(t.gpsLocation),t.numberOfBuildings>1&&this.isMultipleBuildings.setValue([!0])},error:t=>console.log("Loading society details failed")})}cancel(){this.location.back()}save(){if(this.fb.invalid)return;let e=this.fb.value;e&&(e.numberOfBuildings||(e.numberOfBuildings=1),this.fb.value.societyId?this.edit(e):this.add(e))}add(e){this.societyService.createSociety(e).pipe(C(1)).subscribe({next:t=>this.location.back(),error:t=>{this.errorMessage="Error while adding society",console.log("error while adding society")}})}edit(e){let t=this.fb.value.societyId??"";this.societyService.updateSociety(t,e).pipe(C(1)).subscribe({next:n=>this.location.back(),error:n=>{this.errorMessage="Error while adding society",console.log("error while adding society")}})}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(T),h(j),h(L),h(_e))}}static{this.\u0275cmp=M({type:i,selectors:[["app-add-society"]],decls:12,vars:33,consts:[[3,"formGroup"],["formControlName","societyName",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","gpsLocation",3,"config","smColumns","mdColumns","lgColumns"],[1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["helpText","You can select multiple options",3,"formControl","config","options","smColumns","mdColumns","lgColumns"],["formControlName","numberOfBuildings","type","number",3,"config","smColumns","mdColumns","lgColumns"],[1,"flex","ui-form-layout","flex-end",3,"smColumns","mdColumns","lgColumns"],["label","Cancel","type","cancel",3,"clicked","smColumns","mdColumns","lgColumns"],["label","Save","type","primary",3,"clicked","smColumns","mdColumns","lgColumns","disable"],["class","flex flex-center",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],[1,"flex","flex-center",3,"smColumns","mdColumns","lgColumns"],["valueType","error",3,"valueText"]],template:function(t,n){t&1&&(a(0,"app-layout")(1,"form",0)(2,"ui-form-layout"),g(3,"ui-text-box",1)(4,"ui-location-search",2),a(5,"div",3),g(6,"ui-checklist",4)(7,"ui-text-box",5),s(),a(8,"div",6)(9,"ui-button",7),_("clicked",function(){return n.cancel()}),s(),a(10,"ui-button",8),_("clicked",function(){return n.save()}),s()(),p(11,Tt,2,4,"div",9),s()()()),t&2&&(r(),o("formGroup",n.fb),r(2),o("config",n.societyNameConfig)("smColumns",12)("mdColumns",12)("lgColumns",8),r(),o("config",n.locationSearchConfig)("smColumns",12)("mdColumns",12)("lgColumns",8),r(),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("formControl",n.isMultipleBuildings)("config",n.multiBuildingConfig)("options",n.multiBuildingOptions)("smColumns",12)("mdColumns",4)("lgColumns",3),r(),o("config",n.buildingCountConfig)("smColumns",12)("mdColumns",8)("lgColumns",5),r(),o("smColumns",12)("mdColumns",12)("lgColumns",8),r(),o("smColumns",6)("mdColumns",2)("lgColumns",2),r(),o("smColumns",6)("mdColumns",2)("lgColumns",2)("disable",n.fb.invalid),r(),o("ngIf",n.errorMessage))},dependencies:[N,Q,$,W,Y,J,X,E,O,ee,be,Z,B,st,V]})}}return i})();function Mt(i,c){if(i&1){let e=S();a(0,"ui-button",18),_("clicked",function(){b(e);let n=l();return v(n.gotoEditSociety())}),g(1,"app-icon",19),s()}}function Nt(i,c){if(i&1){let e=S();a(0,"ui-button",20),_("clicked",function(){b(e);let n=l();return v(n.gotoSocietyManageers())}),s()}}function Pt(i,c){if(i&1){let e=S();a(0,"ui-chip",21),_("crossClicked",function(){let n=b(e).$implicit,m=l();return v(m.removeSecretary(n))}),s()}if(i&2){let e,t=c.$implicit,n=l();o("value",((e=t.name)!==null&&e!==void 0?e:"")+""+t.phoneNumber)("crossAction",n.canDeleteManager)}}function Bt(i,c){if(i&1){let e=S();a(0,"ui-button",12),_("clicked",function(){b(e);let n=l();return v(n.gotoBuildingManager())}),s()}if(i&2){let e,t=l();o("disable",!t.canViewBuildings||((e=t.society==null?null:t.society.numberOfBuildings)!==null&&e!==void 0?e:0)<=1)}}function Et(i,c){if(i&1){let e=S();a(0,"ui-button",20),_("clicked",function(){b(e);let n=l();return v(n.gotoParkingManager())}),s()}}function Ot(i,c){if(i&1){let e=S();a(0,"ui-button",20),_("clicked",function(){b(e);let n=l();return v(n.gotoComplaints())}),s()}}function Vt(i,c){i&1&&g(0,"ui-button",22)}var gt=(()=>{class i{get canUpdateSociety(){return this.loginService.hasPermission(f.society_update,this.society?._id)}get canViewManager(){return this.loginService.hasPermission(f.society_adminContact_view,this.society?._id)}get canDeleteManager(){return this.loginService.hasPermission(f.society_adminContact_delete,this.society?._id)}get canViewBuildings(){return this.loginService.hasPermission(f.building_view,this.society?._id)}get canViewFlats(){return this.loginService.hasPermission(f.flat_view,this.society?._id)}get canViewParkings(){return this.loginService.hasPermission(f.parking_view,this.society?._id)}constructor(e,t,n,m){this.router=e,this.route=t,this.societyService=n,this.loginService=m,this.flats=[],this.parkings=[],this.managerIds=[]}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadSociety(e):this.router.navigateByUrl("")}loadSociety(e){this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.society=t;let n=this.society.managerIds;this.managerIds=n.reduce((m,x)=>(typeof x!="string"&&m.push(x),m),[]),this.loadComplaints(this.society._id),this.loadParkings(this.society._id)},error:t=>console.log("Error while getting society details")})}loadFlats(e){this.flats=[{_id:"201",flatNumber:"A-101",societyId:"100",buildingId:"101",flatType:K["1BHK"]},{_id:"202",flatNumber:"A-102",societyId:"100",buildingId:"101",flatType:K["1BHK"]},{_id:"203",flatNumber:"B-201",societyId:"100",buildingId:"102",flatType:K["1BHK"]},{_id:"204",flatNumber:"B-202",societyId:"100",buildingId:"102",flatType:K["1BHK"]}]}loadComplaints(e){this.complaints={pending:5,completed:18}}loadParkings(e){this.parkings=[{_id:"1",parkingNumber:"CAR"},{_id:"2",parkingNumber:"BIKE",flatId:"101"}]}gotoEditSociety(){this.router.navigate(["/society",this.society?._id,"edit"])}gotoSocietyManageers(){this.router.navigate(["/society",this.society?._id,"managers"])}gotoBuildingManager(){this.router.navigate(["/society",this.society?._id,"buildings"])}gotoFlatManager(){this.router.navigate(["/society",this.society?._id,"flats"])}gotoParkingManager(){this.router.navigate(["/society",this.society?._id,"parkings"])}gotoComplaints(){this.router.navigate(["/complaints"])}removeSecretary(e){return pe(this,null,function*(){this.society&&this.societyService.deleteManager(this.society._id,e._id).pipe(C(1)).subscribe(()=>{this.loadSociety(this.society?._id??"")})})}static{this.\u0275fac=function(t){return new(t||i)(h(T),h(j),h(L),h(P))}}static{this.\u0275cmp=M({type:i,selectors:[["app-society-details"]],decls:47,vars:38,consts:[[3,"hideMoreActions"],[1,"society-header",3,"smColumns","mdColumns","lgColumns"],[1,"society-name"],["type","only-content","label","",3,"clicked",4,"ngIf"],[1,"card",3,"smColumns","mdColumns","lgColumns"],[1,"card-header"],["label","Manage","type","only-content",3,"clicked",4,"ngIf"],[1,"list"],[3,"value","crossAction","crossClicked",4,"ngFor","ngForOf"],[1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],[1,"stat",3,"smColumns","mdColumns","lgColumns"],["label","Manage","type","only-content",3,"disable","clicked",4,"ngIf"],["label","Manage","type","only-content",3,"clicked","disable"],[1,"complaints"],[1,"badge","pending"],[1,"badge","done"],["label","Manage","type","only-content",4,"ngIf"],[1,"features"],["type","only-content","label","",3,"clicked"],["name","edit"],["label","Manage","type","only-content",3,"clicked"],[3,"crossClicked","value","crossAction"],["label","Manage","type","only-content"]],template:function(t,n){t&1&&(a(0,"app-layout",0)(1,"ui-form-layout")(2,"div",1)(3,"h2",2),y(4),s(),p(5,Mt,2,0,"ui-button",3),s(),a(6,"section",4)(7,"div",5)(8,"span"),y(9,"Secretaries"),s(),p(10,Nt,1,0,"ui-button",6),s(),a(11,"div",7),p(12,Pt,1,2,"ui-chip",8),s()(),a(13,"section",9)(14,"div",10)(15,"label"),y(16,"Buildings"),s(),a(17,"strong"),y(18),s(),p(19,Bt,1,1,"ui-button",11),s(),a(20,"div",10)(21,"label"),y(22,"Flats"),s(),a(23,"strong"),y(24),s(),a(25,"ui-button",12),_("clicked",function(){return n.gotoFlatManager()}),s()()(),a(26,"section",4)(27,"div",5)(28,"span"),y(29,"Parkings"),s(),p(30,Et,1,0,"ui-button",6),s()(),a(31,"section",4)(32,"div",5)(33,"span"),y(34,"Complaints"),s(),p(35,Ot,1,0,"ui-button",6),s(),a(36,"div",13)(37,"div",14),y(38),s(),a(39,"div",15),y(40),s()()(),a(41,"section",4)(42,"div",5)(43,"span"),y(44,"Active Features"),s(),p(45,Vt,1,0,"ui-button",16),s(),g(46,"div",17),s()()()),t&2&&(o("hideMoreActions",!0),r(2),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(2),ie(n.society==null?null:n.society.societyName),r(),o("ngIf",n.canUpdateSociety),r(),o("smColumns",12)("mdColumns",12)("lgColumns",6),r(4),o("ngIf",n.canViewManager),r(2),o("ngForOf",n.managerIds),r(),o("smColumns",12)("mdColumns",12)("lgColumns",6),r(),o("smColumns",12)("mdColumns",6)("lgColumns",6),r(4),ie(n.society==null?null:n.society.numberOfBuildings),r(),o("ngIf",n.canUpdateSociety),r(),o("smColumns",12)("mdColumns",6)("lgColumns",6),r(4),ie(0),r(),o("disable",!n.canViewFlats),r(),o("smColumns",12)("mdColumns",12)("lgColumns",6),r(4),o("ngIf",n.canUpdateSociety),r(),o("smColumns",12)("mdColumns",12)("lgColumns",6),r(4),o("ngIf",n.canUpdateSociety),r(3),k("Pending: ",n.complaints==null?null:n.complaints.pending,""),r(2),k("Completed: ",n.complaints==null?null:n.complaints.completed,""),r(),o("smColumns",12)("mdColumns",12)("lgColumns",6),r(4),o("ngIf",n.canUpdateSociety))},dependencies:[D,N,E,O,B,ct,U,V],styles:[".society-header[_ngcontent-%COMP%]{margin-bottom:24px;display:flex;justify-content:space-between}.society-header[_ngcontent-%COMP%]   .society-name[_ngcontent-%COMP%]{color:#0b4da0;font-size:18px}@media (min-width: 768px) and (max-width: 991px){.society-header[_ngcontent-%COMP%]   .society-name[_ngcontent-%COMP%]{font-size:20px}}@media (min-width: 992px){.society-header[_ngcontent-%COMP%]   .society-name[_ngcontent-%COMP%]{font-size:22px}}.card[_ngcontent-%COMP%]{border-radius:6px;padding:16px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;color:#0b4da0}section[_ngcontent-%COMP%]{border:1px solid #f1f1f1;box-shadow:0 6px 18px #0000000f;transition:transform .2s ease,box-shadow .2s ease}.list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.stat[_ngcontent-%COMP%]{padding:16px;border-radius:6px;display:flex;gap:4px;justify-content:space-between}.stat[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], .stat[_ngcontent-%COMP%]   ui-button[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #f1f1f1;text-align:left}.complaints[_ngcontent-%COMP%]{display:flex;gap:16px}.badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px}.badge.pending[_ngcontent-%COMP%]{background:#7ec8ff}.badge.done[_ngcontent-%COMP%]{background:#dff2ff}.features[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}@media (min-width: 992px){.stat[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.stat[_ngcontent-%COMP%]   .btn.primary[_ngcontent-%COMP%]{width:auto;min-width:auto;font-size:.85rem;white-space:nowrap;flex-shrink:0}}"]})}}return i})();var A=(()=>{class i{constructor(e,t){this.loginService=e,this.router=t}canActivate(e){let t=e.data.permission;if(!t)return!0;let m=e.data.checkSocietyId?e.paramMap.get("id"):void 0,x=this.loginService.hasPermission(t,m??void 0);return x||this.router.navigate(["/unauthorized"]),x}static{this.\u0275fac=function(t){return new(t||i)(Te(P),Te(T))}}static{this.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Dt(i,c){if(i&1&&g(0,"ui-contact-search",8),i&2){let e=l(2);o("formControl",e.contactSearchFormControl)("smColumns",12)("mdColumns",8)("lgColumns",8)}}function jt(i,c){if(i&1&&g(0,"ui-user-search",8),i&2){let e=l(2);o("formControl",e.userSearchFormControl)("smColumns",12)("mdColumns",8)("lgColumns",8)}}function Rt(i,c){if(i&1){let e=S();F(0),g(1,"ui-radio-list",3),p(2,Dt,1,4,"ui-contact-search",4)(3,jt,1,4,"ui-user-search",4),a(4,"div",5)(5,"ui-button",6),_("clicked",function(){b(e);let n=l();return v(n.cancel())}),s(),a(6,"ui-button",7),_("clicked",function(){b(e);let n=l();return v(n.addSecretary())}),s()(),w()}if(i&2){let e=l();r(),o("formControl",e.radioFormControl)("config",e.radioConfig)("options",e.radioOptions)("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("ngIf",e.showContactSearch),r(),o("ngIf",e.showUserSearch),r(),o("smColumns",12)("mdColumns",8)("lgColumns",8),r(),o("smColumns",6)("mdColumns",2)("lgColumns",2),r(),o("smColumns",6)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid)}}function Ut(i,c){if(i&1){let e=S();a(0,"div",12),_("click",function(){b(e);let n=l().$implicit,m=l();return v(m.removeSecretary(n))}),g(1,"app-icon",13),s()}}function Gt(i,c){if(i&1&&(a(0,"ui-card",9)(1,"div",10),y(2),s(),p(3,Ut,2,0,"div",11),s()),i&2){let e,t=c.$implicit,n=l();o("smColumns",12)("mdColumns",6)("lgColumns",6),r(2),k(" ",(e=t.name)!==null&&e!==void 0?e:t.phoneNumber," "),r(),o("ngIf",n.canDeleteSocietyManager)}}var ft=(()=>{class i{get managerName(){return(this.society?this.society.societyName:"")+" Managers"}get showUserSearch(){return this.radioFormControl.value==="user"}get showContactSearch(){return this.radioFormControl.value==="contact"}get canAddSocietyManager(){return this.loginService.hasPermission(f.society_adminContact_add,this.society?._id)}get canDeleteSocietyManager(){return this.loginService.hasPermission(f.society_adminContact_delete,this.society?._id)}constructor(e,t,n,m,x){this.route=e,this.societyService=t,this.location=n,this.loginService=m,this.router=x,this.managers=[],this.loading=!1,this.isComponentActive=new q,this.userSearchFormControl=new u({value:null,disabled:!1}),this.contactSearchFormControl=new u(null),this.radioFormControl=new u("user"),this.fb=new R({manager:new u(null,[d.required])}),this.radioConfig={id:"radio",label:"Radio",placeholder:"Search By",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Radio is required"}},this.radioOptions=[{label:"By App User",value:"user"},{label:"By Contact",value:"contact"}]}ngOnInit(){this.societyId=this.route.snapshot.paramMap.get("id"),this.societyId||this.router.navigateByUrl(""),this.loadSocietyManagers(this.societyId),this.subscribeToRadioChange()}resetAll(){this.fb.reset(),this.userSearchFormControl.reset(),this.contactSearchFormControl.reset()}subscribeToRadioChange(){this.radioFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.resetAll()}),this.userSearchFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.fb.reset(),e&&this.fb.patchValue({manager:{name:e.name??"No Name",phoneNumber:e.phoneNumber,_id:e._id}})}),this.contactSearchFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.fb.reset(),e&&this.fb.patchValue({manager:{name:e.name,phoneNumber:e.phoneNumber}})})}loadSocietyManagers(e){this.loading=!0,this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.society=t,this.society.managerIds&&typeof this.society.managerIds[0]=="string"||(this.managers=this.society.managerIds),this.loading=!1},error:()=>{this.loading=!1}})}addSecretary(){this.fb.invalid||!this.societyId||this.societyService.newManager(this.societyId,this.fb.value.manager).pipe(C(1)).subscribe({next:e=>{e.success&&this.loadSocietyManagers(this.societyId??"")}})}removeSecretary(e){return pe(this,null,function*(){this.societyId&&this.societyService.deleteManager(this.societyId,e._id).pipe(C(1)).subscribe(()=>{this.loadSocietyManagers(this.societyId??"")})})}cancel(){this.location.back()}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(j),h(L),h(_e),h(P),h(T))}}static{this.\u0275cmp=M({type:i,selectors:[["app-society-managers"]],decls:4,vars:4,consts:[[3,"title","hideMoreActions"],[4,"ngIf"],[3,"smColumns","mdColumns","lgColumns",4,"ngFor","ngForOf"],["label","Status","helpText","Select current status","direction","horizontal",3,"formControl","config","options","smColumns","mdColumns","lgColumns"],[3,"formControl","smColumns","mdColumns","lgColumns",4,"ngIf"],[1,"flex","ui-form-layout","flex-end",3,"smColumns","mdColumns","lgColumns"],["label","Cancel","type","cancel",3,"clicked","smColumns","mdColumns","lgColumns"],["label","Save","type","primary",3,"clicked","smColumns","mdColumns","lgColumns","disable"],[3,"formControl","smColumns","mdColumns","lgColumns"],[3,"smColumns","mdColumns","lgColumns"],["card-main",""],["card-icon","",3,"click",4,"ngIf"],["card-icon","",3,"click"],["name","delete","color","#a60000",1,"delete"]],template:function(t,n){t&1&&(a(0,"app-layout",0)(1,"ui-form-layout"),p(2,Rt,7,18,"ng-container",1)(3,Gt,4,5,"ui-card",2),s()()),t&2&&(o("title",n.managerName)("hideMoreActions",!0),r(2),o("ngIf",n.canAddSocietyManager),r(),o("ngForOf",n.managers))},dependencies:[D,N,$,Y,E,O,ye,B,ve,Se,z,U,V],styles:[".delete[_ngcontent-%COMP%]{cursor:pointer}"]})}}return i})();function $t(i,c){if(i&1&&g(0,"ui-radio-list",16),i&2){let e=l(2);o("formControl",e.radioFormControl)("config",e.radioConfig)("options",e.radioOptions)("smColumns",12)("mdColumns",7)("lgColumns",3)}}function zt(i,c){if(i&1&&g(0,"ui-contact-search",17),i&2){let e=l(2);o("formControl",e.contactSearchFormControl)("smColumns",12)("mdColumns",8)("lgColumns",7)}}function Kt(i,c){if(i&1&&g(0,"ui-user-search",17),i&2){let e=l(2);o("formControl",e.userSearchFormControl)("smColumns",12)("mdColumns",8)("lgColumns",7)}}function Ht(i,c){if(i&1){let e=S();a(0,"ui-button",18),_("clicked",function(){b(e);let n=l(2);return v(n.addBuilding())}),s()}if(i&2){let e=l(2);o("isSubmit",!0)("disable",e.fb.invalid||!e.canAddBuildings||e.pendingBuildingsToAdd===0)}}function Wt(i,c){if(i&1){let e=S();a(0,"ui-button",18),_("clicked",function(){b(e);let n=l(2);return v(n.editBuilding())}),s()}if(i&2){let e=l(2);o("isSubmit",!0)("disable",e.fb.invalid||!e.canUpdateBuildings)}}function Qt(i,c){if(i&1){let e=S();a(0,"ui-button",19),_("clicked",function(){b(e);let n=l(2);return v(n.gotoViewParkings())}),s()}}function Yt(i,c){if(i&1){let e=S();a(0,"ui-button",20),_("clicked",function(){b(e);let n=l(2);return v(n.gotoViewFlats())}),s()}}function Jt(i,c){if(i&1){let e=S();F(0),g(1,"ui-text-box",4)(2,"ui-text-box",5),a(3,"section",6),g(4,"ui-checklist",7),p(5,$t,1,6,"ui-radio-list",8)(6,zt,1,4,"ui-contact-search",9)(7,Kt,1,4,"ui-user-search",9),s(),a(8,"section",10)(9,"ui-button",11),_("clicked",function(){b(e);let n=l();return v(n.resetBuildingForm())}),s(),p(10,Ht,1,2,"ui-button",12)(11,Wt,1,2,"ui-button",12),s(),a(12,"section",10),p(13,Qt,1,0,"ui-button",13)(14,Yt,1,0,"ui-button",14),s(),a(15,"section",6),g(16,"ui-label",15),s(),w()}if(i&2){let e=l();r(),o("config",e.buildingNumberConfig)("smColumns",12)("mdColumns",10)("lgColumns",6),r(),o("config",e.floorsConfig)("smColumns",12)("mdColumns",2)("lgColumns",1),r(),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("formControl",e.needManagerFormControl)("config",e.needManagerConfig)("options",e.needManagerOptions)("smColumns",12)("mdColumns",4)("lgColumns",3),r(),o("ngIf",e.needManager),r(),o("ngIf",e.needManager&&e.showContactSearch),r(),o("ngIf",e.needManager&&e.showUserSearch),r(),o("smColumns",12)("mdColumns",12)("lgColumns",7),r(),o("label",e.selectedBuildingId?"Cancel":"Reset"),r(),o("ngIf",!e.selectedBuildingId),r(),o("ngIf",e.selectedBuildingId),r(),o("smColumns",12)("mdColumns",12)("lgColumns",7),r(),o("ngIf",e.canViewFlats),r(),o("ngIf",e.canViewFlats),r(),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("valueText",e.pendingBuildingsToAdd)("config",e.pendingBuildingsConfig)("valueType",e.pendingBuildingType)("smColumns",12)("mdColumns",6)("lgColumns",3)}}function Xt(i,c){if(i&1&&(a(0,"span",28),y(1," Manager: "),a(2,"i"),y(3),He(4,"userName"),s()()),i&2){let e=l().$implicit;r(3),k(" ",We(4,1,e.managerId,!0)," ")}}function Zt(i,c){if(i&1){let e=S();a(0,"app-icon",29),_("click",function(){b(e);let n=l().$implicit,m=l();return v(m.resetBuildingForm(n))}),s()}}function ei(i,c){if(i&1){let e=S();a(0,"app-icon",30),_("click",function(){b(e);let n=l().$implicit,m=l();return v(m.deleteBuilding(n))}),s()}}function ti(i,c){if(i&1&&(a(0,"ui-card",21)(1,"div",22),y(2),a(3,"span",23),y(4),s(),p(5,Xt,5,4,"span",24),s(),a(6,"div",25),p(7,Zt,1,0,"app-icon",26)(8,ei,1,0,"app-icon",27),s()()),i&2){let e=c.$implicit,t=l();o("smColumns",12)("mdColumns",6)("lgColumns",6)("disable",t.selectedBuildingId===e._id),r(2),k(" ",e.buildingNumber," - "),r(2),Ue(" ",e.floors," Floor ",e.floors>1?"s":"",""),r(),o("ngIf",e.managerId),r(2),o("ngIf",t.canUpdateBuildings),r(),o("ngIf",t.canDeleteBuildings)}}var Ct=(()=>{class i{get pageTitle(){if(this.society)return this.society.societyName+" Building Manager"}get showUserSearch(){return this.radioFormControl.value==="user"}get showContactSearch(){return this.radioFormControl.value==="contact"}get selectedBuildingId(){return this.fb.get("_id")?.value??void 0}get canAddBuildings(){return this.loginService.hasPermission(f.building_add,this.societyId)}get canUpdateBuildings(){return this.loginService.hasPermission(f.building_update,this.societyId)}get canDeleteBuildings(){return this.loginService.hasPermission(f.building_delete,this.societyId)}get needManager(){return this.needManagerFormControl.value&&this.needManagerFormControl.value.length>0?this.needManagerFormControl.value[0]:!1}get canViewFlats(){return this.loginService.hasPermission(f.flat_view,this.societyId)}get pendingBuildingsToAdd(){return(this.society?.numberOfBuildings??0)-this.buildings.length}get pendingBuildingType(){return this.pendingBuildingsToAdd<0?"error":this.pendingBuildingsToAdd>0?"active":"info"}constructor(e,t,n,m){this.loginService=e,this.societyService=t,this.route=n,this.router=m,this.buildings=[],this.loading=!1,this.isComponentActive=new q,this.buildingNumberConfig={id:"buildingNumber",label:"Building Number",placeholder:"Enter Building Name/Number",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Building Number is required"}},this.floorsConfig={id:"floors",label:"Floors",placeholder:"Enter Floors Count",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"Floors count is required",min:"There can be 1 or more floors"}},this.needManagerConfig={id:"needManager",label:"Building Manager"},this.radioConfig={id:"radio",label:"Radio",placeholder:"Search By",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Radio is required"}},this.pendingBuildingsConfig={id:"pendingBuildings",label:"Pending Buildings To Add"},this.needManagerOptions=[{label:"Need Separate Manager ?",value:!0}],this.radioOptions=[{label:"By App User",value:"user"},{label:"By Contact",value:"contact"}],this.userSearchFormControl=new u({value:null,disabled:!1}),this.contactSearchFormControl=new u(null),this.needManagerFormControl=new u([]),this.radioFormControl=new u("user"),this.fb=new R({_id:new u(""),buildingNumber:new u("",[d.required]),societyId:new u("",d.required),floors:new u(0,[d.required,d.min(1)]),managerId:new u({value:null,disabled:!0},[d.required])})}ngOnInit(){this.societyId=this.route.snapshot.paramMap.get("id"),this.societyId||this.router.navigateByUrl(""),this.subscribeToRadioChange(),this.resetBuildingForm(),this.loadSociety(this.societyId),this.loadSocietyBuildings(this.societyId)}resetManagerSearch(){this.fb.get("managerId")?.reset(),this.userSearchFormControl.reset(),this.contactSearchFormControl.reset()}subscribeToRadioChange(){this.needManagerFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.resetManagerSearch(),e&&e.length>0?this.fb.get("managerId")?.enable():this.fb.get("managerId")?.disable()}),this.radioFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.resetManagerSearch()}),this.userSearchFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.fb.get("managerId")?.reset(),e&&this.fb.get("managerId")?.setValue({name:e.name??"No Name",phoneNumber:e.phoneNumber,_id:e._id})}),this.contactSearchFormControl.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.fb.get("managerId")?.reset(),e&&this.fb.get("managerId")?.setValue({name:e.name,phoneNumber:e.phoneNumber})})}resetBuildingForm(e){if(!this.societyId)return;this.resetManagerSearch();let t=!e||!e.managerId||typeof e.managerId=="string"?null:e.managerId;this.needManagerFormControl.setValue(t?[!0]:[]),this.radioFormControl.setValue("user"),this.fb.patchValue({_id:e?._id??void 0,buildingNumber:e?.buildingNumber??"",societyId:this.societyId,floors:e?.floors??1,managerId:t}),this.fb.markAsUntouched(),this.fb.markAsPristine(),this.userSearchFormControl.setValue(t)}loadSociety(e){this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.society=t,this.society.numberOfBuildings<=1&&this.router.navigateByUrl("")}})}loadSocietyBuildings(e){this.loading=!0,this.societyService.getBuildings(e).pipe(C(1)).subscribe({next:t=>{this.buildings=t.data},error:()=>{this.loading=!1}})}addBuilding(){this.fb.invalid||!this.societyId||this.societyService.newBuilding(this.societyId,this.fb.value).pipe(C(1)).subscribe({next:()=>{this.loadSocietyBuildings(this.societyId??""),this.resetBuildingForm()}})}editBuilding(){this.fb.invalid||!this.selectedBuildingId||!this.societyId||this.societyService.updateBuilding(this.societyId,this.selectedBuildingId,{buildingNumber:this.fb.value.buildingNumber,societyId:this.fb.value.societyId,floors:this.fb.value.floors,managerId:this.fb.value.managerId}).pipe(C(1)).subscribe({next:()=>{this.loadSocietyBuildings(this.societyId??""),this.resetBuildingForm()}})}deleteBuilding(e){this.societyId&&this.societyService.deleteBuilding(this.societyId,e._id).pipe(C(1)).subscribe({next:t=>{this.loadSocietyBuildings(this.societyId??""),this.resetBuildingForm()}})}gotoViewFlats(){this.societyId&&(this.selectedBuildingId?this.router.navigate(["society",this.societyId,"buildings",this.selectedBuildingId,"flats"]):this.router.navigate(["society",this.societyId,"flats"]))}gotoViewParkings(){this.societyId&&(this.selectedBuildingId?this.router.navigate(["society",this.societyId,"buildings",this.selectedBuildingId,"parkings"]):this.router.navigate(["society",this.societyId,"parkings"]))}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(P),h(L),h(j),h(T))}}static{this.\u0275cmp=M({type:i,selectors:[["app-building-list"]],decls:5,vars:5,consts:[[3,"hideMoreActions","title"],[3,"formGroup"],[4,"ngIf"],[3,"smColumns","mdColumns","lgColumns","disable",4,"ngFor","ngForOf"],["formControlName","buildingNumber",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","floors","type","number",3,"config","smColumns","mdColumns","lgColumns"],[1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["direction","horizontal",1,"flex-end",3,"formControl","config","options","smColumns","mdColumns","lgColumns"],["label","Status","helpText","Select current status","direction","horizontal",3,"formControl","config","options","smColumns","mdColumns","lgColumns",4,"ngIf"],[3,"formControl","smColumns","mdColumns","lgColumns",4,"ngIf"],[1,"flex","flex-end","flex-gap",3,"smColumns","mdColumns","lgColumns"],["type","only-content",3,"clicked","label"],["label","Save","type","primary",3,"isSubmit","disable","clicked",4,"ngIf"],["label","Manage Parkings","type","only-content",3,"clicked",4,"ngIf"],["label","Manage Flats","type","only-content",3,"clicked",4,"ngIf"],["direction","horizontal",3,"valueText","config","valueType","smColumns","mdColumns","lgColumns"],["label","Status","helpText","Select current status","direction","horizontal",3,"formControl","config","options","smColumns","mdColumns","lgColumns"],[3,"formControl","smColumns","mdColumns","lgColumns"],["label","Save","type","primary",3,"clicked","isSubmit","disable"],["label","Manage Parkings","type","only-content",3,"clicked"],["label","Manage Flats","type","only-content",3,"clicked"],[3,"smColumns","mdColumns","lgColumns","disable"],["card-main",""],[1,"floor-count"],["class","manager",4,"ngIf"],["card-icon","",1,"building-action"],["name","edit",3,"click",4,"ngIf"],["class","delete","name","delete","color","#a60000",3,"click",4,"ngIf"],[1,"manager"],["name","edit",3,"click"],["name","delete","color","#a60000",1,"delete",3,"click"]],template:function(t,n){t&1&&(a(0,"app-layout",0)(1,"form",1)(2,"ui-form-layout"),p(3,Jt,17,40,"ng-container",2)(4,ti,9,10,"ui-card",3),s()()()),t&2&&(o("hideMoreActions",!0)("title",n.pageTitle),r(),o("formGroup",n.fb),r(2),o("ngIf",n.canAddBuildings||n.canUpdateBuildings&&n.selectedBuildingId),r(),o("ngForOf",n.buildings))},dependencies:[D,N,Q,$,W,Y,J,X,E,O,ee,ye,be,Z,B,ve,Se,z,U,V,it],styles:[".floor-count[_ngcontent-%COMP%]{color:#4c4545}.manager[_ngcontent-%COMP%]{color:#4c4545;font-size:14px;padding-top:8px;display:block}.building-action[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{padding:12px;cursor:pointer}"]})}}return i})();var oi=()=>({id:"error"});function ri(i,c){i&1&&g(0,"ui-society-search",12),i&2&&o("smColumns",12)("mdColumns",10)("lgColumns",5)}function si(i,c){if(i&1&&g(0,"ui-label",13),i&2){let e=l(2);o("valueText",e.society.societyName)("config",e.societyNameConfig)("smColumns",12)("mdColumns",10)("lgColumns",10)}}function ai(i,c){if(i&1&&(F(0,17),g(1,"ui-text-box",18)(2,"ui-text-box",19)(3,"ui-text-box",20)(4,"ui-text-box",21)(5,"ui-drop-down",22),w()),i&2){let e=l(3);r(),o("config",e.fromFloorConfig)("smColumns",6)("mdColumns",5)("lgColumns",2),r(),o("config",e.toFloorConfig)("smColumns",6)("mdColumns",5)("lgColumns",2),r(),o("config",e.startFlatConfig)("smColumns",6)("mdColumns",5)("lgColumns",2),r(),o("config",e.endFlatConfig)("smColumns",6)("mdColumns",5)("lgColumns",2),r(),o("config",e.flatTypeSelectorConfig)("options",e.flatTypeOptions)("smColumns",12)("mdColumns",4)("lgColumns",2)}}function li(i,c){if(i&1&&(F(0,23),g(1,"ui-text-box",24)(2,"ui-text-box",25)(3,"ui-drop-down",22),w()),i&2){let e=l(3);r(),o("config",e.flatNumberConfig)("smColumns",6)("mdColumns",4)("lgColumns",4),r(),o("config",e.floorConfig)("smColumns",6)("mdColumns",2)("lgColumns",2),r(),o("config",e.flatTypeSelectorConfig)("options",e.flatTypeOptions)("smColumns",12)("mdColumns",4)("lgColumns",4)}}function mi(i,c){if(i&1){let e=S();F(0),a(1,"ui-tabs",14),_("tabChange",function(n){b(e);let m=l(2);return v(m.handleTabChange(n))}),ze("tabChange",function(n){b(e);let m=l(2);return $e(m.selectedTab,n)||(m.selectedTab=n),v(n)}),s(),p(2,ai,6,21,"ng-container",15)(3,li,4,13,"ng-container",16),w()}if(i&2){let e=l(2);r(),o("config",e.addFlatTabsConfig)("tabs",e.tabsOptions),Ge("tab",e.selectedTab),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("ngIf",e.selectedTab==="autoGen"),r(),o("ngIf",e.selectedTab==="addFlat")}}function ci(i,c){if(i&1&&g(0,"ui-label",26),i&2){let e=l(2);o("valueText",e.errorMessage)("config",Ce(5,oi))("smColumns",12)("mdColumns",6)("lgColumns",6)}}function di(i,c){if(i&1){let e=S();F(0),p(1,ri,1,3,"ui-society-search",4)(2,si,1,5,"ui-label",5),g(3,"ui-drop-down",6),p(4,mi,4,8,"ng-container",2),a(5,"section",7),p(6,ci,1,6,"ui-label",8),a(7,"ui-button",9),_("clicked",function(){b(e);let n=l();return v(n.addFlat())}),s()(),a(8,"section",10),g(9,"ui-drop-down",11),s(),w()}if(i&2){let e=l();r(),o("ngIf",!e.society),r(),o("ngIf",e.society),r(),o("config",e.buildingSelectorConfig)("options",e.buildingOptions)("smColumns",12)("mdColumns",10)("lgColumns",5),r(),o("ngIf",e.buildings.length>0&&e.selectedBuilding||(e.selectedSociety==null?null:e.selectedSociety.numberOfBuildings)===1),r(),o("smColumns",12)("mdColumns",10)("lgColumns",10),r(),o("ngIf",e.errorMessage),r(),o("smColumns",12)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid),r(),o("smColumns",12)("mdColumns",10)("lgColumns",10),r(),o("formControl",e.floorControl)("config",e.floorFilterConfig)("options",e.filterOptions)("smColumns",12)("mdColumns",10)("lgColumns",5)}}function ui(i,c){if(i&1){let e=S();a(0,"app-icon",33),_("click",function(){b(e);let n=l(2).$implicit,m=l();return v(m.deleteFlat(n))}),s()}}function pi(i,c){if(i&1&&(a(0,"ui-card",28)(1,"div",29)(2,"span",30)(3,"b"),y(4),s(),y(5),s(),a(6,"span",30),y(7),s(),g(8,"div"),s(),a(9,"div",31),p(10,ui,1,0,"app-icon",32),s()()),i&2){let e=l().$implicit,t=l();o("smColumns",12)("mdColumns",6)("lgColumns",6)("disable",t.selectedFlatId===e._id),r(4),k("",e.floor,":"),r(),k(" ",e.flatNumber," "),r(2),k(" ",e.flatType," "),r(3),o("ngIf",t.canDeleteFlat)}}function gi(i,c){if(i&1&&(F(0),p(1,pi,11,8,"ui-card",27),w()),i&2){let e=c.$implicit,t=l();r(),o("ngIf",!t.floorControl.value||t.floorControl.value===e.floor.toString())}}var Fe=(()=>{class i{get filterOptions(){let e=this.flats.reduce((t,n)=>(t.add(n.floor.toString()),t),new Set);return[this.defaultFilter,...Array.from(e.values()).map(t=>({label:t,value:t}))]}get selectedFlatId(){return this.fb.get("_id")?.value??void 0}get selectedSociety(){return this.fb.get("society")?.value??void 0}get selectedBuilding(){return this.fb.get("building")?.value??void 0}get pageTitle(){return this.society?this.society.societyName+" Flats Manager":"Flat Manager"}get flatTypeOptions(){return lt.map(e=>({label:e.toString(),value:e}))}get buildingOptions(){return this.buildings.map(e=>({label:e.buildingNumber,value:e._id}))}get canAddFlat(){return this.loginService.hasPermission(f.flat_add,this.societyId)}get canDeleteFlat(){return this.loginService.hasPermission(f.flat_delete,this.societyId)}constructor(e,t,n,m){this.route=e,this.router=t,this.societyService=n,this.loginService=m,this.buildings=[],this.flats=[],this.fb=new R({_id:new u(""),society:new u(null,[d.required]),building:new u(null,[d.required]),autogenerateForm:new R({fromFloor:new u(1,[d.required]),toFloor:new u(1,[d.required]),startFlat:new u(1,[d.required]),endFlat:new u(1,[d.required]),flatType:new u(K["1BHK"],[d.required])}),addFlats:new R({flatNumber:new u(null,[d.required]),floor:new u(1,[d.required]),flatType:new u(K["1BHK"],[d.required])})}),this.floorControl=new u(null),this.isComponentActive=new q,this.floorFilterConfig={id:"floor",label:"Floor",placeholder:"Select Floor"},this.societyNameConfig={id:"societyName",label:"Society Name"},this.buildingSelectorConfig={id:"building",label:"Building",placeholder:"Select Building",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Building is required"}},this.addFlatTabsConfig={id:"settingsTab",label:""},this.flatNumberConfig={id:"flatNumber",label:"Flat Number",placeholder:"Enter Flat Number",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Flat Number is required"}},this.floorConfig={id:"floor",label:"Floor",placeholder:"Enter To Floor",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"Floors is required",min:"Floor cannot be less than 1"}},this.fromFloorConfig={id:"fromFloor",label:"From Floors",placeholder:"Enter From Floor",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"Floors count is required",min:"Minimum 1 floor is required"}},this.toFloorConfig={id:"toFloor",label:"To Floors",placeholder:"Enter To Floors",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"Floors count is required",min:"Minimum 1 floor is required"}},this.startFlatConfig={id:"startFlat",label:"Start Flat Number",placeholder:"Enter Start flat unmber",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"Start Flat Number is required",min:"Start Flat Number cannot be less than 1"}},this.endFlatConfig={id:"endFlat",label:"End Flat Number",placeholder:"Enter End flat unmber",validations:[{name:"required",validator:d.required},{name:"min",validator:d.min(1)}],errorMessages:{required:"End Flat Number is required",min:"End Flat Number cannot be less than 1"}},this.flatTypeSelectorConfig={id:"flatType",label:"Flat Type",placeholder:"Select Flat Type",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Flat Number is required"}},this.selectedTab="addFlat",this.tabsOptions=[{value:"addFlat",label:"Add Flat"},{value:"autoGen",label:"Autogenerate Flats"}],this.defaultFilter={label:"All",value:""},this.errorMessage=""}ngOnInit(){this.societyId=this.route.snapshot.paramMap.get("id"),this.buildingId=this.route.snapshot.paramMap.get("buildingId"),this.societyId&&(this.loadSociety(this.societyId),this.buildingId&&this.loadBuilding(this.societyId,this.buildingId)),this.subscribeToChange()}loadSociety(e){this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.society=t,this.fb.get("society")?.setValue(t),this.society.numberOfBuildings>1?(this.loadSocietyBuildings(e),this.fb.get("building")?.enable()):(this.loadFlats(e),this.fb.get("building")?.disable())}})}loadSocietyBuildings(e){this.societyService.getBuildings(e).pipe(C(1)).subscribe({next:t=>{this.buildings=t.data}})}loadBuilding(e,t){this.societyService.getBuilding(e,t).pipe(C(1)).subscribe({next:n=>{this.building=n,this.loadFlats(e,t),setTimeout(()=>{this.fb.get("building")?.setValue(n._id),this.fb.get("building")?.disable()})}})}loadFlats(e,t){this.societyService.getFlats(e,t).pipe(C(1)).subscribe({next:n=>{this.flats=n.data}})}subscribeToChange(){this.fb.get("society")?.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.buildings=[],this.fb.get("building")?.reset(),this.flats=[],this.fb.get("building")?.enable(),e&&(e.numberOfBuildings>1?this.loadSocietyBuildings(e._id):(this.loadFlats(e._id),setTimeout(()=>{this.fb.get("building")?.disable()})))}),this.fb.get("building")?.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{if(this.flats=[],!e)return;let t=this.buildings.find(m=>m._id===e);if(!t)return;let n=typeof t.societyId=="string"?t.societyId:t.societyId._id;this.loadFlats(n,t._id)}),this.floorControl.valueChanges.pipe(I(this.isComponentActive)).subscribe({next:e=>{}})}handleTabChange(e){switch(e){case"autoGen":this.fb.get("autogenerateForm")?.enable(),this.fb.get("addFlats")?.disable();break;case"addFlat":this.fb.get("autogenerateForm")?.disable(),this.fb.get("addFlats")?.enable();break}}addFlat(){if(this.fb.invalid)return;let e=this.fb.getRawValue(),t;if(this.selectedTab==="addFlat"){let n={flatNumber:e.addFlats?.flatNumber,buildingId:e.building,societyId:e.society?._id??"",flatType:e.addFlats?.flatType,floor:e.addFlats?.floor},m=this.findExistingFlat([n]);if(m){this.errorMessage=`Flat ${m} already exists`;return}t=this.societyService.newFlat(n.societyId,n)}else if(this.selectedTab==="autoGen"){let n=e.autogenerateForm,m=n?.flatType??K["1BHK"],x=(n?.fromFloor??0)*1,G=(n?.toFloor??0)*1,Oe=(n?.startFlat??0)*1,ht=(n?.endFlat??0)*1,yt=Array.from({length:G-x+1},(ue,ce)=>x+ce),bt=Array.from({length:ht-Oe+1},(ue,ce)=>Oe+ce),Ve=yt.reduce((ue,ce)=>(bt.forEach(vt=>{ue.push({flatNumber:vt.toString(),flatType:m,floor:ce,societyId:e.society?._id??"",buildingId:e.building??void 0})}),ue),[]),Le=this.findExistingFlat(Ve);if(Le){this.errorMessage=`Flat ${Le} already exists`;return}t=this.societyService.newFlats(e.society?._id??"",Ve)}t&&t.pipe(C(1)).subscribe({next:n=>{let m=e.society?._id??"",x=e.building??void 0;this.loadFlats(m,x),this.fb.get("autogenerateForm")?.reset(),this.fb.get("addFlats")?.reset()}})}findExistingFlat(e){return e.filter(t=>this.flats.some(n=>n.flatNumber==t.flatNumber&&n.floor===t.floor)).map(t=>t.floor+":"+t.flatNumber).join(", ")}deleteFlat(e){this.societyId&&this.societyService.deleteFlat(this.societyId,e._id).pipe(C(1)).subscribe({next:t=>{let n=typeof e.buildingId=="string"?e.buildingId:e.buildingId?._id;this.loadFlats(this.societyId??"",n??void 0)}})}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(j),h(T),h(L),h(P))}}static{this.\u0275cmp=M({type:i,selectors:[["app-flat-list"]],decls:5,vars:5,consts:[[3,"hideMoreActions","title"],[3,"formGroup"],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","society",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],["direction","horizontal","valueType","info",3,"valueText","config","smColumns","mdColumns","lgColumns",4,"ngIf"],["formControlName","building","placeholder","Select Building",3,"config","options","smColumns","mdColumns","lgColumns"],[1,"flex","flex-end","flex-gap",3,"smColumns","mdColumns","lgColumns"],["valueType","error",3,"valueText","config","smColumns","mdColumns","lgColumns",4,"ngIf"],["label","Add",3,"clicked","smColumns","mdColumns","lgColumns","disable"],[1,"fui-form-layout",3,"smColumns","mdColumns","lgColumns"],[3,"formControl","config","options","smColumns","mdColumns","lgColumns"],["formControlName","society",3,"smColumns","mdColumns","lgColumns"],["direction","horizontal","valueType","info",3,"valueText","config","smColumns","mdColumns","lgColumns"],[3,"tabChange","config","tabs","tab","smColumns","mdColumns","lgColumns"],["formGroupName","autogenerateForm",4,"ngIf"],["formGroupName","addFlats",4,"ngIf"],["formGroupName","autogenerateForm"],["type","number","formControlName","fromFloor",3,"config","smColumns","mdColumns","lgColumns"],["type","number","formControlName","toFloor",3,"config","smColumns","mdColumns","lgColumns"],["type","number","formControlName","startFlat",3,"config","smColumns","mdColumns","lgColumns"],["type","number","formControlName","endFlat",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","flatType","placeholder","Select Flat Type",3,"config","options","smColumns","mdColumns","lgColumns"],["formGroupName","addFlats"],["formControlName","flatNumber",3,"config","smColumns","mdColumns","lgColumns"],["type","number","formControlName","floor",3,"config","smColumns","mdColumns","lgColumns"],["valueType","error",3,"valueText","config","smColumns","mdColumns","lgColumns"],[3,"smColumns","mdColumns","lgColumns","disable",4,"ngIf"],[3,"smColumns","mdColumns","lgColumns","disable"],["card-main","",1,"flex","flex-gap"],[1,"note"],["card-icon","",1,"flat-action"],["class","delete","name","delete","color","#a60000",3,"click",4,"ngIf"],["name","delete","color","#a60000",1,"delete",3,"click"]],template:function(t,n){t&1&&(a(0,"app-layout",0)(1,"form",1)(2,"ui-form-layout"),p(3,di,10,25,"ng-container",2)(4,gi,2,1,"ng-container",3),s()()()),t&2&&(o("hideMoreActions",!0)("title",n.pageTitle),r(),o("formGroup",n.fb),r(2),o("ngIf",n.canAddFlat),r(),o("ngForOf",n.flats))},dependencies:[D,N,Q,$,W,Y,J,X,Ze,E,O,ee,he,rt,Z,B,z,xe,U,V],styles:[".flat-action[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{padding:12px;cursor:pointer}"]})}}return i})();var fi=["target"],Ci=()=>({id:"error"});function _i(i,c){i&1&&g(0,"ui-society-search",18),i&2&&o("smColumns",12)("mdColumns",12)("lgColumns",12)}function hi(i,c){if(i&1&&g(0,"ui-label",19),i&2){let e=l(2);o("valueText",e.society.societyName)("config",e.societyNameConfig)("smColumns",12)("mdColumns",10)("lgColumns",10)}}function yi(i,c){if(i&1&&g(0,"ui-label",20),i&2){let e=l(2);o("valueText",e.errorMessage)("config",Ce(5,Ci))("smColumns",12)("mdColumns",6)("lgColumns",6)}}function bi(i,c){if(i&1){let e=S();a(0,"ui-button",21),_("clicked",function(){b(e);let n=l(2);return v(n.generateParking())}),s()}i&2&&o("smColumns",12)("mdColumns",2)("lgColumns",2)}function vi(i,c){if(i&1){let e=S();a(0,"ui-button",22),_("clicked",function(){b(e);let n=l(2);return v(n.cancelEditParking())}),s()}if(i&2){let e=l(2);o("smColumns",12)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid)}}function Si(i,c){if(i&1){let e=S();a(0,"ui-button",23),_("clicked",function(){b(e);let n=l(2);return v(n.updateParking())}),s()}if(i&2){let e=l(2);o("smColumns",12)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid)}}function xi(i,c){if(i&1){let e=S();a(0,"ui-button",24),_("clicked",function(){b(e);let n=l(2);return v(n.addParking())}),s()}if(i&2){let e=l(2);o("smColumns",12)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid)}}function Ii(i,c){if(i&1&&(F(0),p(1,_i,1,3,"ui-society-search",5)(2,hi,1,5,"ui-label",6),a(3,"section",7,0),g(5,"ui-drop-down",8)(6,"ui-drop-down",9)(7,"ui-drop-down",10)(8,"ui-text-box",11),s(),a(9,"section",12),p(10,yi,1,6,"ui-label",13)(11,bi,1,3,"ui-button",14)(12,vi,1,4,"ui-button",15)(13,Si,1,4,"ui-button",16)(14,xi,1,4,"ui-button",17),s(),w()),i&2){let e,t=l();r(),o("ngIf",!t.society),r(),o("ngIf",t.society),r(),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(2),o("config",t.buildingSelectorConfig)("options",t.buildingOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),r(),o("config",t.parkingTypeSelectorConfig)("options",t.parkingTypeOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),r(),o("config",t.flatIdConfig)("options",t.parkingFlatOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),r(),o("config",t.parkingNumberConfig)("smColumns",12)("mdColumns",6)("lgColumns",3),r(),o("smColumns",12)("mdColumns",12)("lgColumns",12),r(),o("ngIf",t.errorMessage),r(),o("ngIf",!t.selectedParkingId&&t.selectedBuildingId&&((e=t.society==null?null:t.society.numberOfBuildings)!==null&&e!==void 0?e:0)>1),r(),o("ngIf",t.selectedParkingId),r(),o("ngIf",t.selectedParkingId),r(),o("ngIf",!t.selectedParkingId)}}function ki(i,c){if(i&1&&(a(0,"div",28),y(1),s()),i&2){let e=l().$implicit,t=l();r(),k(" Flat ",t.getFlatNumber(e)," ")}}function Fi(i,c){if(i&1){let e=S();a(0,"app-icon",33),_("click",function(){b(e);let n=l().$implicit,m=l();return v(m.editParking(n))}),s()}}function wi(i,c){if(i&1){let e=S();a(0,"app-icon",34),_("click",function(){b(e);let n=l().$implicit,m=l();return v(m.deleteParking(n))}),s()}}function Ti(i,c){if(i&1&&(F(0),a(1,"ui-card",25)(2,"div",26)(3,"div",27)(4,"span",28)(5,"b"),y(6),s()(),a(7,"span",28),y(8),s()(),p(9,ki,2,1,"div",29),s(),a(10,"div",30),p(11,Fi,1,0,"app-icon",31)(12,wi,1,0,"app-icon",32),s()(),w()),i&2){let e=c.$implicit,t=l();r(),o("smColumns",12)("mdColumns",6)("lgColumns",6)("disable",t.selectedParkingId===e._id),r(5),ie(e.parkingNumber),r(2),k(" ",t.getFlatType(e)," "),r(),o("ngIf",e.flatId),r(2),o("ngIf",t.canUpdateParking),r(),o("ngIf",t.canDeleteParking)}}var we=(()=>{class i{get selectedParkingId(){return this.fb.get("_id")?.value??void 0}get selectedBuildingId(){return this.fb.get("building")?.value??void 0}get selectedSociety(){return this.fb.get("society")?.value??void 0}get selectedBuilding(){return this.fb.get("building")?.value??void 0}get pageTitle(){return this.society?this.society.societyName+" Parkings Manager":"Parkings Manager"}get buildingOptions(){return this.buildings.map(e=>({label:e.buildingNumber,value:e._id}))}get parkingTypeOptions(){return Ne.map(e=>({label:e.name,value:e.vehicleTypeId}))}get parkingFlatOptions(){return this.flats.map(e=>({label:e.floor+":"+e.flatNumber,value:e._id}))}get canAddParking(){return this.loginService.hasPermission(f.parking_add,this.societyId)}get canUpdateParking(){return this.loginService.hasPermission(f.parking_update,this.societyId)}get canDeleteParking(){return this.loginService.hasPermission(f.parking_delete,this.societyId)}constructor(e,t,n,m){this.route=e,this.router=t,this.societyService=n,this.loginService=m,this.buildings=[],this.flats=[],this.parkings=[],this.fb=new R({_id:new u(""),society:new u(null,[d.required]),building:new u(null,[d.required]),parkingNumber:new u(null,[d.required]),parkingType:new u("4W",[d.required]),flatId:new u(null,[d.required])}),this.errorMessage="",this.isComponentActive=new q,this.societyNameConfig={id:"societyName",label:"Society Name"},this.buildingSelectorConfig={id:"building",label:"Building",placeholder:"Select Building",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Building is required"}},this.parkingTypeSelectorConfig={id:"parkingType",label:"Parking Type",placeholder:"Select Parking Type",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Parking Type is required"}},this.flatIdConfig={id:"flatId",label:"Flat",placeholder:"Select Flat",validations:[{name:"required",validator:d.required}],errorMessages:{required:"Flat is required"}},this.parkingNumberConfig={id:"parkingNumber",label:"Parking Number",placeholder:"Enter Parking Number",validations:[{name:"required",validator:d.required},{name:"minlength",validator:d.minLength(2)}],errorMessages:{required:"Parking Number is required",minlength:"Minimum 2 characters required"}},this.defaultFilter={label:"All",value:""}}ngOnInit(){this.societyId=this.route.snapshot.paramMap.get("id"),this.buildingId=this.route.snapshot.paramMap.get("buildingId"),this.societyId&&(this.loadSociety(this.societyId),this.buildingId&&this.loadBuilding(this.societyId,this.buildingId)),this.subscribeToChange()}loadSociety(e){this.societyService.getSociety(e).pipe(C(1)).subscribe({next:t=>{this.society=t,this.fb.get("society")?.setValue(t),this.society.numberOfBuildings>1?(this.loadSocietyBuildings(e),this.fb.get("building")?.enable()):(this.loadFlats(e),this.loadParkings(e),this.fb.get("building")?.disable())}})}loadSocietyBuildings(e){this.societyService.getBuildings(e).pipe(C(1)).subscribe({next:t=>{this.buildings=t.data}})}loadBuilding(e,t){this.societyService.getBuilding(e,t).pipe(C(1)).subscribe({next:n=>{this.building=n,this.loadFlats(e,t),this.loadParkings(e,t),setTimeout(()=>{this.fb.get("building")?.setValue(n._id),this.fb.get("building")?.disable()})}})}loadFlats(e,t){this.societyService.getFlats(e,t).pipe(C(1)).subscribe({next:n=>{this.flats=n.data}})}loadParkings(e,t){this.societyService.getParkings(e,t).pipe(C(1)).subscribe({next:n=>{this.parkings=n.data}})}subscribeToChange(){this.fb.get("society")?.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{this.buildings=[],this.fb.get("building")?.reset(),this.flats=[],this.parkings=[],this.fb.get("building")?.enable(),e&&(e.numberOfBuildings>1?this.loadSocietyBuildings(e._id):(this.loadFlats(e._id),this.loadParkings(e._id),setTimeout(()=>{this.fb.get("building")?.disable()})),this.cancelEditParking())}),this.fb.get("building")?.valueChanges.pipe(I(this.isComponentActive)).subscribe(e=>{if(this.flats=[],this.parkings=[],!e)return;let t=this.buildings.find(m=>m._id===e);if(!t)return;let n=typeof t.societyId=="string"?t.societyId:t.societyId._id;this.loadFlats(n,t._id),this.loadParkings(n,t._id),this.cancelEditParking()})}addParking(){if(this.fb.invalid||!this.societyId)return;let e=this.fb.value,t={parkingNumber:e.parkingNumber,societyId:this.societyId,buildingId:e.building,flatId:e.flatId,parkingType:e.parkingType},n=this.findExistingParkingNumber([t]);if(n){this.errorMessage=`Parking ${n} already exists`;return}this.societyService.newParking(this.societyId,t).pipe(C(1)).subscribe({next:m=>{this.loadParkings(this.societyId??"",e.building??void 0),this.cancelEditParking()}})}generateParking(){let e=this.flats.filter(m=>!this.parkings.some(x=>x.flatId===m._id));if(e.length===0)return;let t=e.map(m=>({parkingNumber:m.floor+m.flatNumber,societyId:this.societyId,buildingId:m.buildingId,flatId:m._id,parkingType:"4W"})),n=this.findExistingParkingNumber(t);if(n){this.errorMessage=`Parking ${n} already exists`;return}this.societyService.newParkings(this.societyId??"",t).pipe(C(1)).subscribe({next:m=>{this.loadParkings(this.societyId??"",this.selectedBuilding),this.cancelEditParking()}})}updateParking(){if(this.fb.invalid||!this.societyId)return;let e=this.fb.value;if(this.parkings.some(n=>n._id!==e._id&&n.parkingNumber===e.parkingNumber)){this.errorMessage="Parking number already exists";return}let t={_id:e._id,parkingNumber:e.parkingNumber,societyId:this.societyId,buildingId:e.building,flatId:e.flatId,parkingType:e.parkingType};this.societyService.updateParking(this.societyId,e._id??"",t).pipe(C(1)).subscribe({next:n=>{this.loadParkings(this.societyId??"",e.building??void 0),this.cancelEditParking()}})}findExistingParkingNumber(e){return e.filter(t=>this.parkings.some(n=>n.parkingNumber===t.parkingNumber)).map(t=>t.parkingNumber).join(", ")}deleteParking(e){this.societyId&&this.societyService.deleteParking(this.societyId,e._id).pipe(C(1)).subscribe({next:t=>{this.loadParkings(this.societyId??"",this.fb.value.building??void 0)}})}editParking(e){this.fb.get("_id")?.setValue(e._id),this.fb.get("parkingNumber")?.setValue(e.parkingNumber),this.fb.get("parkingType")?.setValue(e.parkingType),this.fb.get("flatId")?.setValue(typeof e.flatId=="string"?e.flatId:e.flatId?._id??""),this.scrollToElement()}cancelEditParking(){this.fb.get("_id")?.reset(),this.fb.get("parkingNumber")?.reset(),this.fb.get("parkingType")?.reset(),this.fb.get("flatId")?.reset()}scrollToElement(){this.target.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}getFlatNumber(e){return!e.flatId||typeof e.flatId=="string"?void 0:e.flatId.floor+":"+e.flatId.flatNumber}getFlatType(e){return Ne.find(t=>t.vehicleTypeId===e.parkingType)?.name}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(t){return new(t||i)(h(j),h(T),h(L),h(P))}}static{this.\u0275cmp=M({type:i,selectors:[["app-parkings-list"]],viewQuery:function(t,n){if(t&1&&qe(fi,5),t&2){let m;De(m=je())&&(n.target=m.first)}},decls:5,vars:5,consts:[["target",""],[3,"hideMoreActions","title"],[3,"formGroup"],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","society",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],["direction","horizontal","valueType","info",3,"valueText","config","smColumns","mdColumns","lgColumns",4,"ngIf"],[1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["formControlName","building","placeholder","Select Building",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","parkingType","placeholder","Select Parking Type",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","flatId","placeholder","Select Flat",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","parkingNumber",3,"config","smColumns","mdColumns","lgColumns"],[1,"flex","flex-end","flex-gap",3,"smColumns","mdColumns","lgColumns"],["valueType","error",3,"valueText","config","smColumns","mdColumns","lgColumns",4,"ngIf"],["label","Auto Generate","type","only-content",3,"smColumns","mdColumns","lgColumns","clicked",4,"ngIf"],["label","Cancel","type","only-content",3,"smColumns","mdColumns","lgColumns","disable","clicked",4,"ngIf"],["label","Save",3,"smColumns","mdColumns","lgColumns","disable","clicked",4,"ngIf"],["label","Add",3,"smColumns","mdColumns","lgColumns","disable","clicked",4,"ngIf"],["formControlName","society",3,"smColumns","mdColumns","lgColumns"],["direction","horizontal","valueType","info",3,"valueText","config","smColumns","mdColumns","lgColumns"],["valueType","error",3,"valueText","config","smColumns","mdColumns","lgColumns"],["label","Auto Generate","type","only-content",3,"clicked","smColumns","mdColumns","lgColumns"],["label","Cancel","type","only-content",3,"clicked","smColumns","mdColumns","lgColumns","disable"],["label","Save",3,"clicked","smColumns","mdColumns","lgColumns","disable"],["label","Add",3,"clicked","smColumns","mdColumns","lgColumns","disable"],[3,"smColumns","mdColumns","lgColumns","disable"],["card-main","",1,"flex-column"],[1,"flex","flex-gap"],[1,"note"],["class","note",4,"ngIf"],["card-icon","",1,"flat-action"],["name","edit","color","#a60000",3,"click",4,"ngIf"],["class","delete","name","delete","color","#a60000",3,"click",4,"ngIf"],["name","edit","color","#a60000",3,"click"],["name","delete","color","#a60000",1,"delete",3,"click"]],template:function(t,n){t&1&&(a(0,"app-layout",1)(1,"form",2)(2,"ui-form-layout"),p(3,Ii,15,32,"ng-container",3)(4,Ti,13,9,"ng-container",4),s()()()),t&2&&(o("hideMoreActions",!0)("title",n.pageTitle),r(),o("formGroup",n.fb),r(2),o("ngIf",n.canAddParking||n.canUpdateParking&&n.selectedParkingId),r(),o("ngForOf",n.parkings))},dependencies:[D,N,Q,$,W,J,X,E,O,ee,he,Z,B,z,xe,U,V],styles:[".flat-action[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{padding:12px;cursor:pointer}"]})}}return i})();var Mi=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",canActivate:[A],component:pt,data:{permission:f.society_view}},{path:"add",canActivate:[A],component:Ee,data:{permission:f.society_add}},{path:":id/edit",canActivate:[A],component:Ee,data:{permission:f.society_update,checkSocietyId:!0}},{path:":id/details",canActivate:[A],component:gt,data:{permission:f.society_view,checkSocietyId:!0}},{path:":id/managers",canActivate:[A],component:ft,data:{permission:f.society_adminContact_view,checkSocietyId:!0}},{path:":id/buildings",canActivate:[A],component:Ct,data:{permission:f.building_view,checkSocietyId:!0}},{path:"flats",canActivate:[A],component:Fe,data:{permission:f.flat_view,checkSocietyId:!0}},{path:":id/flats",canActivate:[A],component:Fe,data:{permission:f.flat_view,checkSocietyId:!0}},{path:":id/buildings/:buildingId/flats",canActivate:[A],component:Fe,data:{permission:f.flat_view,checkSocietyId:!0}},{path:"parkings",canActivate:[A],component:we,data:{permission:f.flat_view,checkSocietyId:!0}},{path:":id/parkings",canActivate:[A],component:we,data:{permission:f.flat_view,checkSocietyId:!0}},{path:":id/buildings/:buildingId/parkings",canActivate:[A],component:we,data:{permission:f.flat_view,checkSocietyId:!0}}],_t=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=fe({type:i})}static{this.\u0275inj=ge({imports:[Me.forChild(Mi),Me]})}}return i})();var Gn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=fe({type:i})}static{this.\u0275inj=ge({imports:[Je,_t,et,tt,ut,dt,ot,mt,nt]})}}return i})();export{Gn as SocietyModule};
