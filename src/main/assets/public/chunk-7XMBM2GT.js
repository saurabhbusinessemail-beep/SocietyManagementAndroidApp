import{a as Se}from"./chunk-HHIT4BTO.js";import{B as we,C as Ue,b as k,c as R,d as D,e as O,f as fe,g as j,h as ge,i as he,j as be,k as L,l as P,m as ye,n as V,s as B,t as ve,v as _e,x as Te,y as xe,z as Fe}from"./chunk-DMHEENG2.js";import{A as I,C as ae,D as A,E as me,F as M,K as ue,L as de,b as ne,m as z,n as re,o as se,oa as ce,p as le,pa as q,qa as pe,ra as Ce,t as u,v as N,w as E,x as b,y as a}from"./chunk-3KFWOHV6.js";import{Ab as h,Cb as p,E as g,Ec as ee,Fc as te,Kc as ie,Lb as m,Lc as oe,Mb as K,Nb as Q,P as y,Sa as o,Ta as v,U as W,V as T,Z as Y,Zb as X,_b as Z,da as x,ea as F,f as $,hb as f,jb as t,ma as w,na as U,rb as s,sb as l,tb as d,ub as S,vb as _,xb as H}from"./chunk-WBOKHTJO.js";import"./chunk-OQV6BHXQ.js";import"./chunk-CWTPBX7D.js";function Ge(i,c){i&1&&(s(0,"h3"),m(1,"Profile"),l(),s(2,"p"),m(3,"Update your personal information."),l(),s(4,"h3"),m(5,"Profile"),l(),s(6,"p"),m(7,"Update your personal information."),l(),s(8,"h3"),m(9,"Profile"),l(),s(10,"p"),m(11,"Update your personal information."),l(),s(12,"h3"),m(13,"Profile"),l(),s(14,"p"),m(15,"Update your personal information."),l(),s(16,"h3"),m(17,"Profile"),l(),s(18,"p"),m(19,"Update your personal information."),l(),s(20,"h3"),m(21,"Profile"),l(),s(22,"p"),m(23,"Update your personal information."),l(),s(24,"h3"),m(25,"Profile"),l(),s(26,"p"),m(27,"Update your personal information."),l(),s(28,"h3"),m(29,"Profile"),l(),s(30,"p"),m(31,"Update your personal information."),l())}function He(i,c){i&1&&(s(0,"h3"),m(1,"Security"),l(),s(2,"p"),m(3,"Change password and manage sessions."),l())}function ze(i,c){i&1&&(s(0,"h3"),m(1,"Notifications"),l(),s(2,"p"),m(3,"Email and push notification preferences."),l())}var Ne=(()=>{class i{constructor(){this.usernameConfig={id:"username",label:"Username",placeholder:"Enter username",validations:[{name:"required",validator:u.required},{name:"minlength",validator:u.minLength(3)}],errorMessages:{required:"Username is required",minlength:"Minimum 3 characters required"}},this.textNameConfig={id:"textName",label:"Text Name",placeholder:"Enter username",helpText:"Some Help",validations:[{name:"required",validator:u.required},{name:"minlength",validator:u.minLength(3)}],errorMessages:{required:"TextNamename is required",minlength:"Minimum 3 characters required"}},this.roleConfig={id:"role",label:"Role",placeholder:"Select role",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Role is required"}},this.userSearchConfig={id:"user",label:"User",placeholder:"Search User",validations:[{name:"required",validator:u.required}],errorMessages:{required:"User is required"}},this.locationSearchConfig={id:"location",label:"Location",placeholder:"Search Location",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Location is required"}},this.contactSearchConfig={id:"contact",label:"Contacts",placeholder:"Search Contact",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Contact is required"}},this.radioConfig={id:"radio",label:"Radio",placeholder:"Search Option",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Radio is required"}},this.permissionConfig={id:"permission",label:"Permission",placeholder:"Search Option",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Radio is required"},helpText:"Some Help"},this.settingTabsConfig={id:"settingsTab",label:"Setting Tabs"},this.typeLabelConfig={id:"type",label:"Type Label"},this.roleOptions=[{label:"Admin",value:"ADMIN"},{label:"Manager",value:"MANAGER"},{label:"User",value:"USER"}],this.filteredUsers=[{label:"Saurabh Kumar",value:"USR_001"},{label:"Amit Sharma",value:"USR_002"},{label:"Neha Verma",value:"USR_003"},{label:"Rohit Mehta",value:"USR_004"},{label:"Pooja Singh",value:"USR_005"}],this.radioOptions=[{label:"Active",value:"ACTIVE"},{label:"Inactive",value:"INACTIVE"}],this.permissionOptions=[{label:"Read",value:"read"},{label:"Write",value:"write"},{label:"Delete",value:"delete"}],this.tabsOptions=[{value:"profile",label:"Profile"},{value:"security",label:"Security"},{value:"notifications",label:"Notifications"}],this.fb=new b({location:new a(void 0),userName:new a({value:"Hello",disabled:!0}),textName:new a("Hello"),contacts:new a(void 0),role:new a({value:"",disabled:!1}),user:new a({value:void 0,disabled:!1}),status:new a({value:void 0,disabled:!1}),statusH:new a({value:void 0,disabled:!1}),permissions:new a({value:void 0,disabled:!1}),permissionsH:new a({value:void 0,disabled:!1}),settingsTab:new a({value:"profile",disabled:!1}),type:new a("avctive")})}onUserSearch(e){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-admin"]],decls:31,vars:82,consts:[["moreActions",""],[1,"btn"],[3,"formGroup"],["formControlName","location",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","contacts",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","user",3,"smColumns","mdColumns","lgColumns"],["label","Click Me",3,"smColumns","mdColumns","lgColumns"],["label","Click Me Click Me Click Me","type","cancel",3,"allowWrapText","smColumns","mdColumns","lgColumns"],["label","Click Me Click Me Click Me","type","error",3,"smColumns","mdColumns","lgColumns"],["label","Click Me Click Me Click Me","type","only-content",3,"smColumns","mdColumns","lgColumns"],["formControlName","userName",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","textName",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","role","placeholder","Select role",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","user",3,"searchChange","config","options","smColumns","mdColumns","lgColumns"],["formControlName","status","label","Status","helpText","Select current status",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","statusH","label","Status","helpText","Select current status","direction","horizontal",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","permissions","helpText","You can select multiple options",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","permissionsH","direction","horizontal","helpText","You can select multiple options",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","type",3,"config","smColumns","mdColumns","lgColumns"],["valueText","active","direction","vertical","valueType","expired",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","settingsTab","direction","vertical","height","100px",3,"config","tabs","smColumns","mdColumns","lgColumns"],["uiTab","profile"],["uiTab","security"],["uiTab","notifications"]],template:function(n,r){n&1&&(s(0,"app-layout"),S(1,0),s(2,"button",1),m(3," More Action "),l(),_(),s(4,"form",2)(5,"ui-form-layout"),d(6,"ui-location-search",3)(7,"ui-contact-search",4)(8,"ui-user-search",5)(9,"ui-button",6)(10,"ui-button",7)(11,"ui-button",8)(12,"ui-button",9)(13,"ui-button",6)(14,"ui-text-box",10)(15,"ui-text-box",11)(16,"ui-drop-down",12),s(17,"ui-search-box",13),h("searchChange",function(J){return r.onUserSearch(J)}),l(),d(18,"ui-radio-list",14)(19,"ui-radio-list",15)(20,"ui-checklist",16)(21,"ui-checklist",17)(22,"ui-label",18)(23,"ui-label",19),s(24,"ui-tabs",20),f(25,Ge,32,0,"ng-template",21)(26,He,4,0,"ng-template",22)(27,ze,4,0,"ng-template",23),l()()(),s(28,"pre"),m(29),X(30,"json"),l()()),n&2&&(o(4),t("formGroup",r.fb),o(2),t("config",r.locationSearchConfig)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.contactSearchConfig)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("smColumns",1)("mdColumns",1)("lgColumns",1),o(),t("allowWrapText",!0)("smColumns",1)("mdColumns",1)("lgColumns",1),o(),t("smColumns",1)("mdColumns",1)("lgColumns",1),o(),t("smColumns",2)("mdColumns",2)("lgColumns",2),o(),t("smColumns",12)("mdColumns",12)("lgColumns",12),o(),t("config",r.usernameConfig)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.textNameConfig)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.roleConfig)("options",r.roleOptions)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.userSearchConfig)("options",r.filteredUsers)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.radioConfig)("options",r.radioOptions)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.radioConfig)("options",r.radioOptions)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.permissionConfig)("options",r.permissionOptions)("smColumns",12)("mdColumns",6)("lgColumns",4),o(),t("config",r.permissionConfig)("options",r.permissionOptions)("smColumns",12)("mdColumns",6)("lgColumns",8),o(),t("config",r.typeLabelConfig)("smColumns",12)("mdColumns",6)("lgColumns",3),o(),t("config",r.typeLabelConfig)("smColumns",12)("mdColumns",6)("lgColumns",3),o(),t("config",r.settingTabsConfig)("tabs",r.tabsOptions)("smColumns",12)("mdColumns",12)("lgColumns",12),o(5),Q("    ",Z(30,80,r.fb.value),`
  `))},dependencies:[k,R,I,N,E,A,M,D,O,fe,j,ge,be,he,ce,q,L,P,ye,V,ie]})}}return i})();var Ee=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${re.apiBaseUrl}/newUser`}newFlatMember(e){return this.http.post(`${this.baseUrl}/newFlatMember`,e)}newSecurity(e){return this.http.post(`${this.baseUrl}/newSecurity`,e)}static{this.\u0275fac=function(n){return new(n||i)(Y(ne))}}static{this.\u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function $e(i,c){if(i&1){let e=H();s(0,"ui-card",5),h("click",function(){let r=w(e).$implicit,C=p(2);return U(C.setRole(r.role))}),s(1,"div",6)(2,"b"),m(3),l()(),s(4,"div",7),d(5,"app-icon",8),l()()}if(i&2){let e=c.$implicit;t("smColumns",12)("mdColumns",4)("lgColumns",2),o(3),K(e.label),o(2),t("name",e.icon)}}function We(i,c){if(i&1&&(S(0),d(1,"div",3),f(2,$e,6,5,"ui-card",4),d(3,"div",3),_()),i&2){let e=p();o(),t("lgColumns",3),o(),t("ngForOf",e.roles),o(),t("lgColumns",3)}}function Ye(i,c){if(i&1&&(s(0,"section",16),d(1,"div",3)(2,"ui-drop-down",17)(3,"ui-drop-down",18)(4,"div",3),l()),i&2){let e=p(2);t("smColumns",12)("mdColumns",12)("lgColumns",12),o(),t("lgColumns",3),o(),t("config",e.buildingSelectorConfig)("options",e.buildingOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),o(),t("config",e.flatIdConfig)("options",e.parkingFlatOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),o(),t("lgColumns",3)}}function Ke(i,c){if(i&1&&d(0,"ui-radio-list",21),i&2){let e=p(3);t("formControl",e.radioFormControl)("config",e.radioConfig)("options",e.radioOptions)("smColumns",12)("mdColumns",6)("lgColumns",3)}}function Qe(i,c){if(i&1&&(s(0,"section",16),d(1,"div",3)(2,"ui-radio-list",19),f(3,Ke,1,6,"ui-radio-list",20),l()),i&2){let e=p(2);t("smColumns",12)("mdColumns",12)("lgColumns",12),o(),t("lgColumns",3),o(),t("config",e.residingTypeConfig)("options",e.residingTypeOptions)("smColumns",12)("mdColumns",6)("lgColumns",3),o(),t("ngIf",e.isResidingTypeTenant)}}function Xe(i,c){i&1&&d(0,"div",3),i&2&&t("lgColumns",3)}function Ze(i,c){if(i&1&&d(0,"ui-contact-search",28),i&2){let e=p(3);t("formControl",e.contactSearchFormControl)("smColumns",12)("mdColumns",12)("lgColumns",6)}}function et(i,c){if(i&1&&d(0,"ui-user-search",28),i&2){let e=p(3);t("formControl",e.userSearchFormControl)("smColumns",12)("mdColumns",12)("lgColumns",6)}}function tt(i,c){i&1&&d(0,"div",3),i&2&&t("lgColumns",3)}function it(i,c){if(i&1&&(s(0,"section",22),f(1,Xe,1,1,"div",23)(2,Ze,1,4,"ui-contact-search",24)(3,et,1,4,"ui-user-search",24)(4,tt,1,1,"div",23),d(5,"div",3)(6,"ui-date",25)(7,"ui-date",26)(8,"ui-text-box",27)(9,"div",3),l()),i&2){let e=p(2);t("smColumns",12)("mdColumns",12)("lgColumns",12),o(),t("ngIf",e.isResidingTypeTenant),o(),t("ngIf",e.showContactSearch&&e.isResidingTypeTenant),o(),t("ngIf",e.showUserSearch&&e.isResidingTypeTenant),o(),t("ngIf",e.isResidingTypeTenant),o(),t("lgColumns",3),o(),t("config",e.leaseStartConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("config",e.leaseEndConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("config",e.rentAmountConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("lgColumns",3)}}function ot(i,c){if(i&1&&(s(0,"section",29),d(1,"div",3)(2,"ui-date",30)(3,"ui-date",31)(4,"ui-text-box",32)(5,"div",3),l()),i&2){let e=p(2);t("smColumns",12)("mdColumns",12)("lgColumns",12),o(),t("lgColumns",3),o(),t("config",e.jobStartConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("config",e.jobEndConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("config",e.salaryAmountConfig)("smColumns",12)("mdColumns",4)("lgColumns",2),o(),t("lgColumns",3)}}function nt(i,c){if(i&1){let e=H();S(0),d(1,"div",3)(2,"ui-society-search",9)(3,"div",3),f(4,Ye,5,15,"section",10)(5,Qe,4,10,"section",10)(6,it,10,21,"section",11)(7,ot,6,17,"section",12),s(8,"section",13)(9,"ui-button",14),h("clicked",function(){w(e);let r=p();return U(r.reset())}),l(),s(10,"ui-button",15),h("clicked",function(){w(e);let r=p();return U(r.save())}),l()(),_()}if(i&2){let e=p();o(),t("lgColumns",3),o(),t("smColumns",12)("mdColumns",12)("lgColumns",6),o(),t("lgColumns",3),o(),t("ngIf",!e.isSecurity),o(),t("ngIf",e.isOwner),o(),t("ngIf",e.isResidingTypeTenant||e.isTenant),o(),t("ngIf",e.isSecurity),o(),t("smColumns",12)("mdColumns",12)("lgColumns",9),o(),t("smColumns",12)("mdColumns",2)("lgColumns",2),o(),t("smColumns",12)("mdColumns",2)("lgColumns",2)("disable",e.fb.invalid)}}var Ie=(()=>{class i{get showUserSearch(){return this.radioFormControl.value==="user"}get showContactSearch(){return this.radioFormControl.value==="contact"}get isResidingTypeTenant(){return this.fb.get("residingType")?.value===B.Tenant}get isTenant(){return this.role==="tenant"}get isSecurity(){return this.role==="security"}get isOwner(){return this.role==="owner"}get residingTypeOptions(){return ve.map(e=>({label:e,value:e}))}get parkingFlatOptions(){return this.flats.map(e=>({label:e.floor+":"+e.flatNumber,value:e._id}))}get buildingOptions(){return this.buildings.map(e=>({label:e.buildingNumber,value:e._id}))}constructor(e,n,r,C){this.societyService=e,this.loginService=n,this.newUserService=r,this.menuService=C,this.role="",this.roles=[{role:"owner",label:"Flat Owner",icon:"home"},{role:"tenant",label:"Tenant",icon:"tenant"},{role:"security",label:"Security",icon:"security"}],this.fb=new b({society:new a(null,[u.required]),building:new a({value:null,disabled:!0},[u.required]),flatId:new a({value:null,disabled:!0}),residingType:new a({value:null,disabled:!0}),tenantForm:new b({leaseStart:new a({value:null,disabled:!0}),leaseEnd:new a({value:null,disabled:!0}),rentAmount:new a({value:null,disabled:!0})}),securityForm:new b({jobStart:new a({value:null,disabled:!0}),jobEnd:new a({value:null,disabled:!0}),salaryAmount:new a({value:null,disabled:!0})})}),this.userSearchFormControl=new a({value:null,disabled:!0}),this.contactSearchFormControl=new a({value:null,disabled:!0}),this.radioFormControl=new a({value:"user",disabled:!0}),this.buildings=[],this.flats=[],this.buildingSelectorConfig={id:"building",label:"Building",placeholder:"Select Building",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Building is required"}},this.flatIdConfig={id:"flatId",label:"Flat",placeholder:"Select Flat",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Flat is required"}},this.residingTypeConfig={id:"residingType",label:"Residing Type",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Residing Type is required"}},this.leaseStartConfig={id:"leaseStart",label:"Lease Start",placeholder:"Enter Lease Start"},this.leaseEndConfig={id:"leaseEnd",label:"Lease End",placeholder:"Enter Lease End"},this.rentAmountConfig={id:"rentAmount",label:"Rent Amount",placeholder:"Enter Rent Amount"},this.radioConfig={id:"radio",label:"Search Tenant",placeholder:"Search By"},this.radioOptions=[{label:"By App User",value:"user"},{label:"By Contact",value:"contact"}],this.jobStartConfig={id:"jobStart",label:"Job Start",placeholder:"Enter Job Start",validations:[{name:"required",validator:u.required}],errorMessages:{required:"Job Start Date is required"}},this.jobEndConfig={id:"jobEnd",label:"Lease End",placeholder:"Enter Job End"},this.salaryAmountConfig={id:"salaryAmount",label:"Salary Amount",placeholder:"Enter Salary Amount"},this.isComponentActive=new $}ngOnInit(){this.fb.get("society")?.valueChanges.pipe(y(this.isComponentActive)).subscribe(e=>{if(this.resetAndDisable("building"),this.resetAndDisable("flatId"),this.resetAndDisable("residingType"),this.resetAndDisable("tenantForm"),this.resetAndDisable("securityForm"),this.radioFormControl.disable(),this.userSearchFormControl.disable(),this.contactSearchFormControl.disable(),!!e){if(this.isSecurity){this.enable("securityForm");return}e.numberOfBuildings>1?(this.loadSocietyBuildings(e._id),this.enable("building")):(this.loadFlats(this.fb.value.society?._id??""),this.enable("flatId"))}}),this.fb.get("building")?.valueChanges.pipe(y(this.isComponentActive)).subscribe(e=>{this.resetAndDisable("flatId"),this.resetAndDisable("residingType"),this.resetAndDisable("tenantForm"),this.resetAndDisable("securityForm"),this.radioFormControl.disable(),this.userSearchFormControl.disable(),this.contactSearchFormControl.disable(),e&&(this.loadFlats(this.fb.value.society?._id??"",e),this.enable("flatId"))}),this.fb.get("flatId")?.valueChanges.pipe(y(this.isComponentActive)).subscribe(e=>{this.resetAndDisable("residingType"),this.resetAndDisable("tenantForm"),this.resetAndDisable("securityForm"),this.radioFormControl.disable(),this.userSearchFormControl.disable(),this.contactSearchFormControl.disable(),e&&(this.isOwner?this.enable("residingType"):this.isTenant?this.enable("tenantForm"):this.isSecurity&&this.enable("securityForm"))}),this.fb.get("residingType")?.valueChanges.pipe(y(this.isComponentActive)).subscribe(e=>{this.resetAndDisable("tenantForm"),this.radioFormControl.disable(),this.userSearchFormControl.disable(),this.contactSearchFormControl.disable(),e===B.Tenant&&(this.radioFormControl.enable(),this.userSearchFormControl.enable(),this.contactSearchFormControl.enable(),this.enable("tenantForm"))})}resetAndDisable(e){this.fb.get(e)?.reset(),this.fb.get(e)?.disable()}enable(e){this.fb.get(e)?.enable()}setRole(e){this.role=e}reset(){this.role="",this.fb.reset()}loadSocietyBuildings(e){this.societyService.getBuildings(e).pipe(g(1)).subscribe({next:n=>{this.buildings=n.data}})}loadFlats(e,n){this.societyService.getFlats(e,n).pipe(g(1)).subscribe({next:r=>{this.flats=r.data}})}save(){switch(this.role){case"owner":this.saveOwner();break;case"tenant":this.saveTenant();break;case"security":this.saveSecurity();break}}getOwnerPayload(){let e=this.fb.getRawValue(),n=this.loginService.getProfileFromStorage();return!e.society||!e.flatId||!n||!e.residingType?void 0:{societyId:e.society._id,flatId:e.flatId,userId:n.user._id,name:n.user.name??"No Name",contact:n.user.phoneNumber,residingType:e.residingType,isOwner:!0}}getTenantPayload(){let e=this.fb.getRawValue(),n=this.loginService.getProfileFromStorage();if(!e.society||!e.flatId||!n||!e.residingType)return;let r={userId:this.showUserSearch?this.userSearchFormControl.value?._id:void 0,name:this.showUserSearch?this.userSearchFormControl.value?.name:this.contactSearchFormControl.value?.name,contact:this.showUserSearch?this.userSearchFormControl.value?.phoneNumber:this.contactSearchFormControl.value?.phoneNumber},C=this.isTenant?{userId:n.user._id,name:n.user.name??"No Name",contact:n.user.phoneNumber}:r;return{societyId:e.society._id,flatId:e.flatId,userId:C.userId,name:C.name,contact:C.contact,residingType:e.residingType,isTenant:!0,leaseStart:e.tenantForm.leaseStart,leaseEnd:e.tenantForm.leaseEnd,rentAmount:e.tenantForm.rentAmount}}generateSecurityPayload(){let e=this.fb.getRawValue(),n=this.loginService.getProfileFromStorage();return!e.society||!n?void 0:{societyId:e.society._id,userId:n.user._id,jobStart:e.securityForm.jobStart,jobEnd:e.securityForm.jobEnd,salaryAmount:e.securityForm.salaryAmount}}saveOwner(){let e=this.getOwnerPayload();if(!e)return;this.fb.getRawValue().residingType===B.Tenant&&this.saveTenant(),this.newUserService.newFlatMember(e).pipe(g(1)).subscribe({next:r=>{!r.success||!r.token||this.updateUserToken(r.token)}})}saveTenant(){let e=this.getTenantPayload();e&&this.newUserService.newFlatMember(e).pipe(g(1)).subscribe({next:n=>{!n.success||!n.token||this.updateUserToken(n.token)}})}saveSecurity(){let e=this.generateSecurityPayload();e&&this.newUserService.newSecurity(e).pipe(g(1)).subscribe({next:n=>{!n.success||!n.token||this.updateUserToken(n.token)}})}updateUserToken(e){this.loginService.saveTokenToStorage(e),this.loginService.loadProfile().pipe(g(1)).subscribe(n=>{!n||!n.success||this.menuService.syncSelectedMenuWithCurrentUrl(!0)})}ngOnDestroy(){this.isComponentActive.next(),this.isComponentActive.complete()}static{this.\u0275fac=function(n){return new(n||i)(v(Se),v(le),v(Ee),v(se))}}static{this.\u0275cmp=x({type:i,selectors:[["app-user"]],decls:5,vars:4,consts:[["title","I Am",3,"hideMoreActions"],[3,"formGroup"],[4,"ngIf"],[1,"no-mobile","no-tablet",3,"lgColumns"],[3,"smColumns","mdColumns","lgColumns","click",4,"ngFor","ngForOf"],[3,"click","smColumns","mdColumns","lgColumns"],["card-main",""],["card-icon",""],[3,"name"],["formControlName","society",3,"smColumns","mdColumns","lgColumns"],["class","ui-form-layout",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],["class","ui-form-layout","formGroupName","tenantForm",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],["class","ui-form-layout","formGroupName","securityForm",3,"smColumns","mdColumns","lgColumns",4,"ngIf"],[1,"flex","flex-end","flex-gap",3,"smColumns","mdColumns","lgColumns"],["label","Cancel","type","only-content",3,"clicked","smColumns","mdColumns","lgColumns"],["label","Save",3,"clicked","smColumns","mdColumns","lgColumns","disable"],[1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["formControlName","building","placeholder","Select Building",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","flatId","placeholder","Select Flat",3,"config","options","smColumns","mdColumns","lgColumns"],["formControlName","residingType","direction","horizontal",3,"config","options","smColumns","mdColumns","lgColumns"],["label","Status","direction","horizontal",3,"formControl","config","options","smColumns","mdColumns","lgColumns",4,"ngIf"],["label","Status","direction","horizontal",3,"formControl","config","options","smColumns","mdColumns","lgColumns"],["formGroupName","tenantForm",1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["class","no-mobile no-tablet",3,"lgColumns",4,"ngIf"],[3,"formControl","smColumns","mdColumns","lgColumns",4,"ngIf"],["formControlName","leaseStart",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","leaseEnd",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","rentAmount","type","number",3,"config","smColumns","mdColumns","lgColumns"],[3,"formControl","smColumns","mdColumns","lgColumns"],["formGroupName","securityForm",1,"ui-form-layout",3,"smColumns","mdColumns","lgColumns"],["formControlName","jobStart",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","jobEnd",3,"config","smColumns","mdColumns","lgColumns"],["formControlName","salaryAmount","type","number",3,"config","smColumns","mdColumns","lgColumns"]],template:function(n,r){n&1&&(s(0,"app-layout",0)(1,"form",1)(2,"ui-form-layout"),f(3,We,4,3,"ng-container",2)(4,nt,11,19,"ng-container",2),l()()()),n&2&&(t("hideMoreActions",!0),o(),t("formGroup",r.fb),o(2),t("ngIf",!r.role),o(),t("ngIf",r.role))},dependencies:[ee,te,k,R,I,N,E,ae,A,M,me,D,O,j,q,L,P,_e,Te,xe,V,pe]})}}return i})();var rt=[{path:"",pathMatch:"full",redirectTo:"user"},{path:"admin",component:Ne},{path:"user",component:Ie}],Ae=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=T({imports:[z.forChild(rt),z]})}}return i})();var Bt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=T({imports:[oe,Ae,Ue,ue,de,we,Fe,Ce]})}}return i})();export{Bt as DashboardModule};
