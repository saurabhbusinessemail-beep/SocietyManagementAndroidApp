import{a as et}from"./chunk-TGXL4BZ5.js";import{a as Z,b as tt}from"./chunk-R5HVBPFA.js";import"./chunk-BXTUOHYQ.js";import"./chunk-H5A3E2HY.js";import{A as J,B as K,D as Q,E as W,F as X,d as Y,e as $,p as H}from"./chunk-PWWNUZIU.js";import{A as G,E as N,M as R,N as q,m as D,o as b,qa as A,r as L,ra as U,ta as B,x as z}from"./chunk-KWNZ2CR7.js";import{Ab as M,Cb as d,E as g,Ec as F,Fb as w,Fc as T,Ic as I,Lc as V,Sa as r,Ta as _,Ub as p,V as C,Vb as E,Zb as S,_b as j,da as v,ea as u,f as y,hb as x,jb as i,ma as O,na as P,rb as c,sb as a,tb as f,ub as s,vb as l,xb as k}from"./chunk-WBOKHTJO.js";import"./chunk-OQV6BHXQ.js";import"./chunk-CWTPBX7D.js";var ct=n=>[n],at=()=>({id:"",label:"Date"}),dt=()=>({id:"",label:"Contact"}),st=()=>({id:"",label:"Purpose"}),lt=()=>({id:"",label:"Time"});function pt(n,h){if(n&1){let t=k();s(0,12),c(1,"ui-button",13),M("clicked",function(){O(t);let o=d().$implicit,m=d();return P(m.onApprove(o))}),a(),c(2,"ui-button",14),M("clicked",function(){O(t);let o=d().$implicit,m=d();return P(m.onReject(o))}),a(),l()}}function mt(n,h){if(n&1&&(s(0),c(1,"app-card-v2",6),s(2,7),f(3,"ui-label",8),S(4,"uppercase"),l(),s(5,9),f(6,"ui-label",10)(7,"ui-label",10)(8,"ui-label",10),l(),x(9,pt,3,0,"ng-container",11),a(),l()),n&2){let t,e=h.$implicit,o=d();r(),i("title",(t=e.visitorName)!==null&&t!==void 0?t:"")("status",o.getGateEntryStatusColorName(e))("smColumns",12)("mdColumns",6)("lgColumns",6),r(2),w("valueText",j(4,14,e.status)),i("valueType",o.getGateEntryLabelType(e)),r(3),i("config",p(16,dt))("valueText",e.visitorContact),r(),i("config",p(17,st))("valueText",e.purpose),r(),i("config",p(18,lt))("valueText",o.formatTime(e.createdOn)),r(),i("ngIf",e.status==="requested")}}var ot=(()=>{class n{constructor(t,e,o){this.gateEntryService=t,this.loginService=e,this.router=o,this.gateEntries=[],this.societyOptions=[],this.flatOptions=[],this.isComponentActive=new y,this.selectedFIlter={},this.selectedDateControl=new G(new Date),this.selectedDateControlConfig={id:"createdOn",label:"Created On",formControl:this.selectedDateControl}}ngOnInit(){if(this.myProfile=this.loginService.getProfileFromStorage(),!this.myProfile){this.router.navigateByUrl("/");return}}getGateEntryStatusColorName(t){switch(t.status){case"approved":return"approved";case"cancelled":return"rejected";case"completed":return"approved";case"expired":return"expired";case"rejected":return"rejected";case"requested":return"pending"}}getGateEntryLabelType(t){switch(t.status){case"approved":return"active";case"cancelled":return"rejected";case"completed":return"active";case"expired":return"inactive";case"rejected":return"rejected";case"requested":return"pending"}}loadGateEntries(t){this.selectedFIlter=t;let e=this.selectedDateControl.value?new Date(this.selectedDateControl.value):void 0;this.gateEntryService.getAllMyGateEntries(t.societyId,t.flatId,void 0,e).pipe(g(1)).subscribe({next:o=>{o.success&&(this.gateEntries=o.data)}})}formatTime(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}onApprove(t){this.gateEntryService.changeStatus(t._id,"approved").pipe(g(1)).subscribe({next:e=>{e.success&&this.loadGateEntries(this.selectedFIlter)}})}onReject(t){this.gateEntryService.changeStatus(t._id,"rejected").pipe(g(1)).subscribe({next:e=>{e.success&&this.loadGateEntries(this.selectedFIlter)}})}getStatusClass(t){switch(t){case"approved":return"status-approved";case"rejected":return"status-rejected";case"requested":return"status-requested";case"completed":return"status-completed";default:return"status-default"}}static{this.\u0275fac=function(e){return new(e||n)(_(et),_(L),_(D))}}static{this.\u0275cmp=v({type:n,selectors:[["app-visitor-list"]],decls:6,vars:14,consts:[[3,"hideMoreActions"],[1,"flex-col","full-h"],[3,"filterChanged","dateControlConfigs","smColumns","mdColumns","lgColumns"],[3,"formControl","config","smColumns","mdColumns","lgColumns"],[1,"flex-auto"],[4,"ngFor","ngForOf"],[3,"title","status","smColumns","mdColumns","lgColumns"],["card-info",""],["direction","horizontal",3,"valueText","valueType"],["card-body",""],["direction","vertical","valueType","info",3,"config","valueText"],["card-actions","",4,"ngIf"],["card-actions",""],["label","Approve",3,"clicked"],["label","Reject","type","error",3,"clicked"]],template:function(e,o){e&1&&(c(0,"app-layout",0)(1,"div",1)(2,"app-filter",2),M("filterChanged",function(rt){return o.loadGateEntries(rt)}),f(3,"ui-date",3),a(),c(4,"ui-form-layout",4),x(5,mt,10,19,"ng-container",5),a()()()),e&2&&(i("hideMoreActions",!0),r(2),i("dateControlConfigs",E(11,ct,o.selectedDateControlConfig))("smColumns",12)("mdColumns",12)("lgColumns",12),r(),i("formControl",o.selectedDateControl)("config",p(13,at))("smColumns",12)("mdColumns",2)("lgColumns",2),r(2),i("ngForOf",o.gateEntries))},dependencies:[F,T,Y,$,A,U,J,Q,H,z,N,Z,I],styles:['.timeline-container[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;padding:16px;background:#f5f7fa;min-height:100vh}.date-selector[_ngcontent-%COMP%]{margin-bottom:24px;background:#fff;padding:16px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.date-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50}.date-selector[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:10px 16px;border:2px solid #e0e6ed;border-radius:6px;font-size:16px;transition:border-color .3s}.date-selector[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px #3498db33}.timeline-header[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;margin-bottom:24px;box-shadow:0 2px 4px #0000001a}.timeline-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.5rem}.timeline-header[_ngcontent-%COMP%]   .entry-count[_ngcontent-%COMP%]{margin:8px 0 0;color:#7f8c8d;font-size:.9rem}@media (max-width: 767px){.timeline-mobile[_ngcontent-%COMP%]{display:block}}@media (min-width: 768px) and (max-width: 991px){.timeline-mobile[_ngcontent-%COMP%]{display:none}}@media (min-width: 992px){.timeline-mobile[_ngcontent-%COMP%]{display:none}}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;overflow:hidden;border-left:4px solid #3498db}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#f8f9fa;border-bottom:1px solid #e0e6ed}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .time-badge[_ngcontent-%COMP%]{background:#3498db;color:#fff;padding:6px 12px;border-radius:20px;font-weight:600;font-size:.9rem}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:16px}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-name[_ngcontent-%COMP%]{margin:0 0 12px;color:#2c3e50;font-size:1.1rem}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-contact[_ngcontent-%COMP%], .timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-purpose[_ngcontent-%COMP%], .timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-time[_ngcontent-%COMP%]{margin:8px 0;color:#5a6c7d;display:flex;align-items:center}.timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-contact[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-purpose[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .timeline-mobile[_ngcontent-%COMP%]   .mobile-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entry-info[_ngcontent-%COMP%]   .entry-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-style:normal}@media (max-width: 767px){.timeline-desktop[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 991px){.timeline-desktop[_ngcontent-%COMP%]{display:block}}@media (min-width: 992px){.timeline-desktop[_ngcontent-%COMP%]{display:block}}.timeline-desktop[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{position:relative;padding:20px 0}.timeline-desktop[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50px;top:0;bottom:0;width:2px;background:linear-gradient(to bottom,#3498db,#2ecc71);transform:translate(-50%)}.timeline-desktop[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{display:flex;margin-bottom:24px;position:relative}.timeline-desktop[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;background:#3498db;border:3px solid white;box-shadow:0 0 0 3px #3498db;z-index:1;flex-shrink:0;margin-right:30px}.timeline-desktop[_ngcontent-%COMP%]   .timeline-marker.status-approved[_ngcontent-%COMP%]{background:#2ecc71;box-shadow:0 0 0 3px #2ecc71}.timeline-desktop[_ngcontent-%COMP%]   .timeline-marker.status-rejected[_ngcontent-%COMP%]{background:#e74c3c;box-shadow:0 0 0 3px #e74c3c}.timeline-desktop[_ngcontent-%COMP%]   .timeline-marker.status-requested[_ngcontent-%COMP%]{background:#f39c12;box-shadow:0 0 0 3px #f39c12}.timeline-desktop[_ngcontent-%COMP%]   .timeline-marker.status-completed[_ngcontent-%COMP%]{background:#9b59b6;box-shadow:0 0 0 3px #9b59b6}.timeline-desktop[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{flex:1;min-width:0}.timeline-desktop[_ngcontent-%COMP%]   .timeline-time[_ngcontent-%COMP%]{font-size:.9rem;color:#7f8c8d;margin-bottom:8px;font-weight:500}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;overflow:hidden;transition:transform .3s,box-shadow .3s}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entry-name[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:24px}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d;margin-bottom:4px;font-weight:500}.timeline-desktop[_ngcontent-%COMP%]   .desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:1rem;color:#2c3e50}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d5f4e6;color:#27ae60}.status-badge.status-rejected[_ngcontent-%COMP%]{background:#fde8e8;color:#e74c3c}.status-badge.status-requested[_ngcontent-%COMP%]{background:#fef9e7;color:#f39c12}.status-badge.status-completed[_ngcontent-%COMP%]{background:#f4ecf7;color:#8e44ad}.card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s;font-size:.9rem}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0)}.card-actions[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.card-actions[_ngcontent-%COMP%]   .btn-approve[_ngcontent-%COMP%]:hover{background:#27ae60;box-shadow:0 4px 12px #2ecc714d}.card-actions[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.card-actions[_ngcontent-%COMP%]   .btn-reject[_ngcontent-%COMP%]:hover{background:#c0392b;box-shadow:0 4px 12px #e74c3c4d}.no-entries[_ngcontent-%COMP%], .no-entries-desktop[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#7f8c8d}.no-entries[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-entries-desktop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin:16px 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0}@media (min-width: 768px) and (max-width: 991px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}.desktop-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px!important}.desktop-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px!important}}@media (min-width: 992px){.timeline-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)!important}}']})}}return n})();var gt=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:ot}],it=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=u({type:n})}static{this.\u0275inj=C({imports:[b.forChild(gt),b]})}}return n})();var Ut=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=u({type:n})}static{this.\u0275inj=C({imports:[V,it,X,W,K,B,R,q,tt]})}}return n})();export{Ut as VisitorModule};
