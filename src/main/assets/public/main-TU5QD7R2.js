import{a as le}from"./chunk-IRBO7TRB.js";import"./chunk-TEVHCJ6T.js";import{B as he,C as ge,a as ce,c as de,d as ue,n as pe,z as fe}from"./chunk-DMHEENG2.js";import{C as oe,K as ie,L as re,M as ne,c as w,d as K,e as X,f as Z,h as $,j as J,k as N,ka as P,la as se,m as y,ma as j,o as Q,p as F,pa as ae,ra as me,t as R,v as ee,y as te}from"./chunk-3KFWOHV6.js";import{$a as V,A as U,Aa as B,Ab as S,E as M,Lb as A,Lc as H,Mb as k,R as _,Sa as f,Ta as a,U as m,Ua as z,V as c,Wa as q,Ya as W,Z as p,_ as O,_a as G,da as g,ea as d,ha as L,jb as b,m as D,rb as h,sb as v,tb as I,wc as Y,y as E}from"./chunk-WBOKHTJO.js";import"./chunk-OQV6BHXQ.js";import"./chunk-CWTPBX7D.js";var u=(()=>{class e{constructor(t,o){this.loginService=t,this.router=o}canActivate(t,o){let i=this.loginService.isLoggedIn(),n=o.url;return i?n.startsWith("/login")?this.router.createUrlTree(["/dashboard"]):!0:i||n.startsWith("/login")?!0:this.router.createUrlTree(["/login"])}static{this.\u0275fac=function(o){return new(o||e)(p(F),p(N))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var we=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadChildren:()=>import("./chunk-7TC4NYHT.js").then(e=>e.LoginModule),canActivate:[u]},{path:"dashboard",loadChildren:()=>import("./chunk-7XMBM2GT.js").then(e=>e.DashboardModule),canActivate:[u]},{path:"society",loadChildren:()=>import("./chunk-7TIZBL2N.js").then(e=>e.SocietyModule),canActivate:[u]},{path:"myflats",loadChildren:()=>import("./chunk-K4NAKAWA.js").then(e=>e.FlatModule),canActivate:[u]},{path:"complaints",loadChildren:()=>import("./chunk-GIVHI2Q3.js").then(e=>e.ComplaintModule),canActivate:[u]},{path:"gateentry",loadChildren:()=>import("./chunk-QCKQMLOZ.js").then(e=>e.GateEntryModule),canActivate:[u]},{path:"gatepass",loadChildren:()=>import("./chunk-PXQBM3ZI.js").then(e=>e.GatePassModule),canActivate:[u]},{path:"unauthorized",loadChildren:()=>import("./chunk-AAX7U3PI.js").then(e=>e.UnauthorizedModule)},{path:"**",loadChildren:()=>import("./chunk-O6LW7VCK.js").then(e=>e.PageNotFoundModule)}],ve=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=c({imports:[y.forRoot(we),y]})}}return e})();var ye=(()=>{class e{constructor(t){this.dialogRef=t,this.userNameConfig={id:"userName",label:"Your Name",placeholder:"Enter Your Name",validations:[{name:"required",validator:R.required},{name:"minlength",validator:R.minLength(3)}],errorMessages:{required:"Your Name is required.",minlength:"Minimum 3 characters required"}},this.userNameFormControl=new te(null,R.required)}save(){this.userNameFormControl.valid&&this.dialogRef.close(this.userNameFormControl.value)}static{this.\u0275fac=function(o){return new(o||e)(a(P))}}static{this.\u0275cmp=g({type:e,selectors:[["app-user-name-input-popup"]],decls:5,vars:12,consts:[[1,"layout-body"],[3,"formControl","config","smColumns","mdColumns","lgColumns"],[1,"flex","flex-end","flex-gap",3,"smColumns","mdColumns","lgColumns"],["label","Save",3,"clicked","smColumns","mdColumns","lgColumns","disable"]],template:function(o,i){o&1&&(h(0,"div",0)(1,"ui-form-layout"),I(2,"ui-text-box",1),h(3,"section",2)(4,"ui-button",3),S("clicked",function(){return i.save()}),v()()()()),o&2&&(f(2),b("formControl",i.userNameFormControl)("config",i.userNameConfig)("smColumns",12)("mdColumns",12)("lgColumns",12),f(),b("smColumns",12)("mdColumns",12)("lgColumns",12),f(),b("smColumns",12)("mdColumns",3)("lgColumns",3)("disable",i.userNameFormControl.invalid))},dependencies:[de,ue,ae,pe,ee,oe],styles:[".layout-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background:#f4f4f4;padding:16px}"]})}}return e})();var Ce=(()=>{class e{constructor(t,o,i,n,s,C,Pe){this.router=t,this.menuService=o,this.loginService=i,this.dialog=n,this.userService=s,this.FcmTokenService=C,this.consoleService=Pe,this.show=!1,this.title="SocietyManagementUI"}ngOnInit(){this.FcmTokenService.init(),this.router.events.pipe(E(t=>t instanceof $)).subscribe(t=>{this.menuService.userMenus.subscribe(o=>{this.menuService.syncSelectedMenuWithCurrentUrl(),this.checkAndAskForUserName()})}),setTimeout(()=>{this.router.url==="/dashboard/user"&&this.menuService.syncSelectedMenuWithCurrentUrl(!0)},100)}checkAndAskForUserName(){setTimeout(()=>{let t=this.loginService.getProfileFromStorage()?.user;this.loginService.isLoggedIn()&&t&&!t.name&&!this.dialogRef&&(this.dialogRef=this.dialog.open(ye),this.dialogRef.afterClosed().pipe(M(1)).subscribe(o=>{this.dialogRef=void 0,!(!o||typeof o!="string")&&this.userService.updateUserName(o).pipe(M(1)).subscribe(i=>{i.success&&this.updateUserToken(i.token)})}))},1e3)}updateUserToken(t){this.loginService.saveTokenToStorage(t),this.loginService.loadProfile().pipe(M(1)).subscribe(o=>{!o||o.success})}static{this.\u0275fac=function(o){return new(o||e)(a(N),a(Q),a(F),a(j),a(ne),a(le),a(ce))}}static{this.\u0275cmp=g({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,i){o&1&&I(0,"router-outlet")},dependencies:[J]})}}return e})();var Te="@",xe=(()=>{class e{constructor(t,o,i,n,s){this.doc=t,this.delegate=o,this.zone=i,this.animationType=n,this.moduleImpl=s,this._rendererFactoryPromise=null,this.scheduler=O(q,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-5P5JOLN4.js")).catch(o=>{throw new _(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:i})=>{this._engine=o(this.animationType,this.doc,this.scheduler);let n=new i(this.delegate,this._engine,this.zone);return this.delegate=n,n})}createRenderer(t,o){let i=this.delegate.createRenderer(t,o);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let n=new x(i);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let C=s.createRenderer(t,o);n.use(C)}).catch(s=>{n.use(i)}),n}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(o){z()}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac})}}return e})(),x=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let t of this.replay)t(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,t){return this.delegate.createElement(r,t)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,t){this.delegate.appendChild(r,t)}insertBefore(r,t,o,i){this.delegate.insertBefore(r,t,o,i)}removeChild(r,t,o){this.delegate.removeChild(r,t,o)}selectRootElement(r,t){return this.delegate.selectRootElement(r,t)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,t,o,i){this.delegate.setAttribute(r,t,o,i)}removeAttribute(r,t,o){this.delegate.removeAttribute(r,t,o)}addClass(r,t){this.delegate.addClass(r,t)}removeClass(r,t){this.delegate.removeClass(r,t)}setStyle(r,t,o,i){this.delegate.setStyle(r,t,o,i)}removeStyle(r,t,o){this.delegate.removeStyle(r,t,o)}setProperty(r,t,o){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(r,t,o)),this.delegate.setProperty(r,t,o)}setValue(r,t){this.delegate.setValue(r,t)}listen(r,t,o){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(r,t,o)),this.delegate.listen(r,t,o)}shouldReplay(r){return this.replay!==null&&r.startsWith(Te)}};function Me(e="animations"){return G("NgAsyncAnimations"),L([{provide:W,useFactory:(r,t,o)=>new xe(r,t,o,e),deps:[Y,K,V]},{provide:B,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var be=(()=>{class e{intercept(t,o){let i=localStorage.getItem("auth_token"),n=localStorage.getItem("fcmToken");if(!i)return o.handle(t);let s=t.headers.set("Authorization",`Bearer ${i}`);n&&(s=s.set("fcmToken",n));let C=t.clone({headers:s});return o.handle(C)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac})}}return e})();var Ie=(()=>{class e{constructor(t,o){this.dialogRef=t,this.data=o}close(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||e)(a(P),a(se))}}static{this.\u0275cmp=g({type:e,selectors:[["app-error-dialog"]],decls:8,vars:2,consts:[[1,"error-dialog"],[1,"title"],[1,"message"],[1,"actions"],["type","button",1,"btn","primary",3,"click"]],template:function(o,i){o&1&&(h(0,"div",0)(1,"h2",1),A(2),v(),h(3,"p",2),A(4),v(),h(5,"div",3)(6,"button",4),S("click",function(){return i.close()}),A(7,"OK"),v()()()),o&2&&(f(2),k(i.data.title),f(2),k(i.data.message))},styles:[".error-dialog[_ngcontent-%COMP%]{padding:24px;min-width:280px}.error-dialog[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.2rem;color:#0b4da0}.error-dialog[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-bottom:16px;color:#6b7280}.error-dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})}}return e})();var Se=(()=>{class e{constructor(t){this.dialog=t,this.dialogOpen=!1}open(t,o){if(this.dialogOpen)return;this.dialogOpen=!0,this.dialog.open(Ie,{disableClose:!0,data:{title:t,message:o}}).afterClosed().subscribe(()=>{this.dialogOpen=!1})}static{this.\u0275fac=function(o){return new(o||e)(p(j))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ae=(()=>{class e{constructor(t){this.errorDialogService=t}intercept(t,o){return o.handle(t).pipe(U(i=>{console.log(i);let n="Unexpected Error",s="Something went wrong. Please try again.";return i.error?.message?s=i.error.message:i.message&&(s=i.message),i.status===0?(n="Network Error",s="Unable to connect to server."):i.status===401?n="Unauthorized":i.status===403?n="Forbidden":i.status===404?n="Not Found":i.status>=500&&(n="Server Error"),this.errorDialogService.open(n,s),D(()=>i)}))}static{this.\u0275fac=function(o){return new(o||e)(p(Se))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac})}}return e})();var Ee=[],Ne=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=c({imports:[y.forChild(Ee),y]})}}return e})();var Fe=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=c({imports:[H,Ne,ge,he,fe,ie,re]})}}return e})();var Re=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=d({type:e,bootstrap:[Ce]})}static{this.\u0275inj=c({providers:[Me(),{provide:w,useClass:be,multi:!0},{provide:w,useClass:Ae,multi:!0}],imports:[Z,ve,me,Fe]})}}return e})();X().bootstrapModule(Re).catch(e=>console.error(e));
